<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://pei-yan-2147.github.io/%E6%A8%B9%E8%AB%96.html><link rel=prev href=%E5%9C%96%E8%AB%96.html><link rel=next href=CSEC.html><link rel=icon href=logo/logo.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.32"><title>樹論 - PEI</title><link rel=stylesheet href=assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><script src=assets/pymdownx-extras/material-extra-theme-2ek1P7jT.js type=text/javascript></script><script src=assets/pymdownx-extras/material-extra-3rdparty-BUCF4rjN.js type=text/javascript></script><!-- 
<script type="text/javascript">
  window.MathJax = {
      tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],  // 支持 $...$ 和 \(...\) 语法
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
      },
      options: {
          processEscapes: true
      }
  };
</script> --><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><!-- 背景图片 --><div class=image-background></div><!-- 星空和流星效果的Canvas背景 --><canvas id=starCanvas style="z-index: -2; position: fixed; top: 0; left: 0; width: 100%; height: 100%;"></canvas><!-- 粒子效果的Canvas背景，放置在星空和流星前面 --><canvas id=particleCanvas style="z-index: -1; position: fixed; top: 0; left: 0; width: 100%; height: 100%;"></canvas><script>
document.addEventListener("DOMContentLoaded", function() {
  var tocContainer = document.querySelector('.custom-toc-container');
  var contentInner = document.querySelector('.md-content__inner');

  // 设置星空流星的 Canvas 尺寸
  var starCanvas = document.getElementById('starCanvas');
  var starCtx = starCanvas.getContext('2d');
  function resizeStarCanvas() {
    starCanvas.width = window.innerWidth;
    starCanvas.height = window.innerHeight;
  }
  resizeStarCanvas();
  window.addEventListener('resize', resizeStarCanvas);

  // 设置粒子效果的 Canvas 尺寸
  var particleCanvas = document.getElementById('particleCanvas');
  var particleCtx = particleCanvas.getContext('2d');
  function resizeParticleCanvas() {
    particleCanvas.width = window.innerWidth;
    particleCanvas.height = window.innerHeight;
  }
  resizeParticleCanvas();
  window.addEventListener('resize', resizeParticleCanvas);

  // 星星类
  class Star {
    constructor() {
      this.reset();  // 随机初始化星星的位置、大小和透明度
    }

    reset() {
      this.x = Math.random() * starCanvas.width;
      this.y = Math.random() * starCanvas.height;
      this.originalSize = Math.random() * 2 + 1;
      this.size = 0;
      this.alpha = 0;
      this.growthSpeed = 0.02;
      this.shrinkSpeed = 0.01;
      this.life = Math.random() * 200 + 100;
    }

    update() {
      if (this.life > 100) {
        this.size += this.growthSpeed;
        this.alpha += this.growthSpeed;
        if (this.size > this.originalSize) this.size = this.originalSize;
        if (this.alpha > 1) this.alpha = 1;
      } else {
        this.size -= this.shrinkSpeed;
        this.alpha -= this.shrinkSpeed;
        if (this.size < 0) this.size = 0;
        if (this.alpha < 0) this.alpha = 0;
      }

      this.life -= 1;
      if (this.life <= 0) this.reset();
    }

    draw() {
      starCtx.fillStyle = `rgba(242, 187, 255, ${this.alpha})`;
      starCtx.beginPath();
      starCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      starCtx.closePath();
      starCtx.fill();
    }
  }

  // 流星类
  class Meteor {
    constructor(x = null, y = null) {
      this.isCustom = (x !== null && y !== null); // 判斷是否是滑鼠生成的流星
      this.reset(x, y);
    }

    reset(x = null, y = null) {
      if (this.isCustom) {
        this.x = x;
        this.y = y;
        this.size = this.originalSize; // 立即设为最大值
        this.alpha = 1; // 立即设为最大透明度
      } else {
        this.x = Math.random() * starCanvas.width / 2;
        this.y = Math.random() * starCanvas.height;
        this.size = 0;
        this.alpha = 0;
      }
      this.originalSize = Math.random() * 1 + 1;
      this.growthSpeed = 0.03;
      this.speedX = Math.random() * 8 + 4;
      this.speedY = Math.random() * 4 + 2;
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;

      if (!this.isCustom) { // 非滑鼠生成的流星才有增大過程
        this.size += this.growthSpeed;
        this.alpha += this.growthSpeed;
        if (this.size > this.originalSize) this.size = this.originalSize;
        if (this.alpha > 1) this.alpha = 1;
        this.alpha -= 0.025;
      } else {
        // 滑鼠生成的流星更快消失
        this.alpha -= 0.025; // 透明度更快減少
      }

      // 如果是滑鼠生成的流星且透明度為0，將其從數組中移除
      if (this.isCustom && this.alpha <= 0) {
        return true; // 返回true表示可以從數組中移除
      }

      if (!this.isCustom && this.isOutOfView()) {
        this.reset(); // 非滑鼠生成的流星需要重新生成
      }
      return false; // 不移除流星
    }

    draw() {
      starCtx.strokeStyle = `rgba(242, 187, 255, ${this.alpha})`;
      starCtx.lineWidth = this.size;
      starCtx.beginPath();
      starCtx.moveTo(this.x, this.y);
      starCtx.lineTo(this.x - this.speedX * 5, this.y - this.speedY * 5);
      starCtx.stroke();

      starCtx.fillStyle = `rgba(242, 187, 255, ${this.alpha})`;
      this.drawStarShape(this.x, this.y, this.size, 5);
    }

    drawStarShape(cx, cy, outerRadius, spikes) {
      let rot = Math.PI / 2 * 3;
      let step = Math.PI / spikes;

      starCtx.beginPath();
      starCtx.moveTo(cx, cy - outerRadius);
      for (let i = 0; i < spikes; i++) {
        let x = cx + Math.cos(rot) * outerRadius;
        let y = cy + Math.sin(rot) * outerRadius;
        starCtx.lineTo(x, y);
        rot += step;
      }
      starCtx.lineTo(cx, cy - outerRadius);
      starCtx.closePath();
      starCtx.fill();
    }

    isOutOfView() {
      return this.x > starCanvas.width || this.y > starCanvas.height || this.alpha <= 0;
    }
  }

  // 粒子类
  class Particle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.size = Math.random() * 3 + 1;
      this.speedX = Math.random() * 3 - 1.5;
      this.speedY = Math.random() * 3 - 1.5;
      this.alpha = 1;
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      if (this.size > 0.2) this.size -= 0.1;
      this.alpha -= 0.02;  // 粒子逐渐消失
    }

    draw() {
      particleCtx.fillStyle = `rgba(242, 187, 255, ${this.alpha})`;
      particleCtx.beginPath();
      particleCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      particleCtx.closePath();
      particleCtx.fill();
    }
  }

  // 初始化粒子、星星、流星数组
  let starsArray = [];
  let meteorsArray = [];
  let customMeteorsArray = [];
  let particlesArray = [];
  const maxMeteors = 1;

  // 初始化星星
  function initStars() {
    starsArray = [];
    for (let i = 0; i < 150; i++) {
      starsArray.push(new Star());
    }
  }

  // 生成更多流星
  function createMeteor() {
    if (meteorsArray.length < maxMeteors) {
      meteorsArray.push(new Meteor());
    }
  }

  // 生成粒子
  function createParticle(event) {
    const x = event.x;
    const y = event.y;
    for (let i = 0; i < 1; i++) {
      particlesArray.push(new Particle(x, y));
    }
  }

  // 生成滑鼠流星
  function createCustomMeteor(event) {
    const x = event.clientX;
    const y = event.clientY;
    const newMeteor = new Meteor(x, y);
    newMeteor.speedX = Math.random() * 8 + 4;  // 設置滑鼠流星的速度
    newMeteor.speedY = Math.random() * 4 + 2;
    newMeteor.size = newMeteor.originalSize; // 立即設定最大大小
    newMeteor.alpha = 1; // 立即設定最大透明度
    customMeteorsArray.push(newMeteor);
  }

  // 更新并绘制星星、流星和粒子
  function handleParticles() {
    for (let i = 0; i < particlesArray.length; i++) {
      particlesArray[i].update();
      particlesArray[i].draw();
      if (particlesArray[i].alpha <= 0) {
        particlesArray.splice(i, 1);
        i--;
      }
    }
  }

  function handleStarsAndMeteors() {
    for (let i = 0; i < starsArray.length; i++) {
      starsArray[i].update();
      starsArray[i].draw();
    }

    for (let i = 0; i < meteorsArray.length; i++) {
      meteorsArray[i].update();
      meteorsArray[i].draw();
      if (meteorsArray[i].isOutOfView()) {
        meteorsArray.splice(i, 1);
        i--;
      }
    }

    for (let i = 0; i < customMeteorsArray.length; i++) {
      if (customMeteorsArray[i].update()) {
        customMeteorsArray.splice(i, 1); // 移除透明度為0的滑鼠生成流星
        i--;
      } else {
        customMeteorsArray[i].draw();
      }
    }
  }

  // 动画循环
  function animate() {
    starCtx.clearRect(0, 0, starCanvas.width, starCanvas.height);
    particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);
    handleStarsAndMeteors();
    handleParticles();
    requestAnimationFrame(animate);
  }

  // 初始化并开始动画
  initStars();
  animate();

  // 流星的生成频率增加
  setInterval(createMeteor, 500);

  // 监听鼠标事件生成粒子
  window.addEventListener('mousemove', createParticle);

  // // 监听鼠标点击生成额外流星
  // window.addEventListener('click', createCustomMeteor);


  // 处理图像大小调整的逻辑
  document.querySelectorAll('img').forEach(function(img) {
      const match = img.src.match(/=(\d+)%x$/);
      if (match) {
          const widthPercentage = match[1];
          img.style.width = widthPercentage + '%';
          img.style.height = 'auto';
          img.src = img.src.replace(/=(\d+)%x$/, '');
      }
  });
});
</script><!-- 
<script type="text/javascript">
  window.MathJax = {
      tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],  // 支持 $...$ 和 \(...\) 语法
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
      },
      options: {
          processEscapes: true
      }
  };
</script> --><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto Mono";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/pymdownx-extras/extra-8611f6c398.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=dracula data-md-color-primary=deep-purple data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#樹論 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <!-- <a href="https://github.com/pei-yan-2147">Sponsorship</a>

is now available!
<span class="twemoji heart-throb">
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg>
</span> --> <!-- ---------------------------------------------------------------------------------- --> <!-- <a href="https://github.com/pei-yan-2147">github</a> --> <!-- 
<span class="twemoji heart-throb">
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M7.655 14.916v-.001h-.002l-.006-.003-.018-.01a22.066 22.066 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22.094 22.094 0 0 1-3.433 2.414 7.152 7.152 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0Z"/></svg>
</span> --> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <a href=https://pei-yan-2147.github.io/ title=PEI class="md-header__button md-logo" aria-label=PEI> <img src=logo/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PEI </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 樹論 </span> </div> </div> </div> <div class=md-header__options> <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon"> <a href=javascript:toggleScheme(); title="Light mode" class=light-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Dark mode" class=dark-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </a> <a href=javascript:toggleScheme(); title="System preference" class=system-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34Z"/></svg> </a> <a href=javascript:toggleScheme(); title="Unknown scheme" class=unknown-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10Z"/></svg> </a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=index.html class=md-tabs__link> 演算法筆記 </a> </li> <li class=md-tabs__item> <a href=mack%E5%BE%AE%E7%A9%8D%E5%88%86.html class=md-tabs__link> mack微積分 </a> </li> <li class=md-tabs__item> <a href=%E6%BB%BE%E7%90%83%E5%88%86%E9%9A%8A.html class=md-tabs__link> 滾球分隊 </a> </li> <li class=md-tabs__item> <a href=mkdocs%E7%AD%86%E8%A8%98.html class=md-tabs__link> mkdocs筆記 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=. title=PEI class="md-nav__button md-logo" aria-label=PEI data-md-component=logo> <img src=logo/logo.png alt=logo> </a> PEI </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> 演算法筆記 </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> 演算法筆記 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_2> <label class=md-nav__link for=__nav_1_2 id=__nav_1_2_label tabindex=0> <span class=md-ellipsis> 競賽準備 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_1_2> <span class="md-nav__icon md-icon"></span> 競賽準備 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=%E5%BE%85%E8%BE%A6%E4%BA%8B%E9%A0%85.html class=md-nav__link> <span class=md-ellipsis> 待辦事項 </span> </a> </li> <li class=md-nav__item> <a href=%E8%80%83%E5%89%8D%E5%BF%85%E7%9C%8B.html class=md-nav__link> <span class=md-ellipsis> 考前必看 </span> </a> </li> <li class=md-nav__item> <a href=%E6%9C%89%E4%BA%8B%E6%B2%92%E4%BA%8B%E6%89%93%E4%B8%80%E6%AC%A1.html class=md-nav__link> <span class=md-ellipsis> 有事沒事打一次 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_3> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex=0> <span class=md-ellipsis> 概念、語法、技巧 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> 概念、語法、技巧 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=%E7%B6%93%E5%85%B8%E5%A0%B1%E9%8C%AF.html class=md-nav__link> <span class=md-ellipsis> 經典報錯 </span> </a> </li> <li class=md-nav__item> <a href=%E5%81%B7%E6%87%B6%E6%96%B9%E6%B3%95.html class=md-nav__link> <span class=md-ellipsis> 偷懶方法 </span> </a> </li> <li class=md-nav__item> <a href=%E6%87%B6%E4%BA%BA%E8%BC%B8%E5%85%A5%E6%B3%95%EF%BC%8C%E6%AF%94%E8%B3%BD%E6%99%82%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> 懶人輸入法，比賽時用 </span> </a> </li> <li class=md-nav__item> <a href=%E6%8C%87%E6%A8%99.html class=md-nav__link> <span class=md-ellipsis> 指標(*、&) </span> </a> </li> <li class=md-nav__item> <a href=getline搭配stringstream.md class=md-nav__link> <span class=md-ellipsis> getline搭配stringstream </span> </a> </li> <li class=md-nav__item> <a href=scanf%20%26%20printf.html class=md-nav__link> <span class=md-ellipsis> scanf & printf </span> </a> </li> <li class=md-nav__item> <a href=%E4%BD%8D%E5%85%83%E9%81%8B%E7%AE%97.html class=md-nav__link> <span class=md-ellipsis> 位元運算 </span> </a> </li> <li class=md-nav__item> <a href=%E4%BD%BF%E7%94%A8%E4%BD%8D%E5%85%83%E7%AA%AE%E8%88%89.html class=md-nav__link> <span class=md-ellipsis> 使用位元窮舉 </span> </a> </li> <li class=md-nav__item> <a href=bitset%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> bitset使用 </span> </a> </li> <li class=md-nav__item> <a href=%E8%A4%87%E9%9B%9C%E5%BA%A6.html class=md-nav__link> <span class=md-ellipsis> 複雜度 </span> </a> </li> <li class=md-nav__item> <a href=%E6%8E%92%E5%BA%8Fsort.html class=md-nav__link> <span class=md-ellipsis> 排序sort </span> </a> </li> <li class=md-nav__item> <a href=%E5%AE%9A%E7%BE%A9%E6%AF%94%E8%BC%83%E8%A6%8F%E5%89%87.html class=md-nav__link> <span class=md-ellipsis> 定義比較規則 </span> </a> </li> <li class=md-nav__item> <a href=%E6%8E%92%E5%88%97%E7%94%9F%E6%88%90permutation%E7%AA%AE%E8%88%89.html class=md-nav__link> <span class=md-ellipsis> 排列生成permutation窮舉 </span> </a> </li> <li class=md-nav__item> <a href=switch%E4%B9%8B%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> switch之使用 </span> </a> </li> <li class=md-nav__item> <a href=do%20while%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> do while使用 </span> </a> </li> <li class=md-nav__item> <a href=%E5%88%A4%E6%96%B7%E6%98%AF%E5%90%A6%E7%82%BA%E6%95%B8%E5%AD%97%E3%80%81%E5%AD%97%E6%AF%8D.html class=md-nav__link> <span class=md-ellipsis> 判斷是否為數字、字母 </span> </a> </li> <li class=md-nav__item> <a href=%E5%A4%A7%E5%B0%8F%E5%AF%AB%E8%BD%89%E6%8F%9B.html class=md-nav__link> <span class=md-ellipsis> 大小寫轉換 </span> </a> </li> <li class=md-nav__item> <a href=%E5%B0%8F%E6%95%B8%E9%BB%9E%E5%BE%8C%E5%B9%BE%E4%BD%8D.html class=md-nav__link> <span class=md-ellipsis> 小數點後幾位 </span> </a> </li> <li class=md-nav__item> <a href=%E8%BC%B8%E5%87%BA%E7%B5%90%E5%B0%BE%E7%A9%BA%E7%99%BD.html class=md-nav__link> <span class=md-ellipsis> 輸出結尾空白 </span> </a> </li> <li class=md-nav__item> <a href=%E5%89%8D%E5%BA%8F%E3%80%81%E4%B8%AD%E5%BA%8F%E3%80%81%E5%BE%8C%E5%BA%8F.html class=md-nav__link> <span class=md-ellipsis> 前序、中序、後序 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> 數論 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> 數論 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=log.html class=md-nav__link> <span class=md-ellipsis> log </span> </a> </li> <li class=md-nav__item> <a href=%CE%A3%20sigma%20%28%E8%A5%BF%E6%A0%BC%E7%91%AA%29.html class=md-nav__link> <span class=md-ellipsis> Σ sigma (西格瑪) </span> </a> </li> <li class=md-nav__item> <a href=%E6%A8%A1%E9%81%8B%E7%AE%97.html class=md-nav__link> <span class=md-ellipsis> %模運算 </span> </a> </li> <li class=md-nav__item> <a href=%E8%B2%BB%E9%A6%AC%E5%B0%8F%E5%AE%9A%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> 元素/費馬小定理 </span> </a> </li> <li class=md-nav__item> <a href=%E5%9C%88%E7%B5%90%E6%A7%8B%26%E7%B4%84%E7%91%9F%E5%A4%AB%E5%95%8F%E9%A1%8C.html class=md-nav__link> <span class=md-ellipsis> 圈結構&約瑟夫問題 </span> </a> </li> <li class=md-nav__item> <a href=%E4%B8%83%E6%A9%8B%E5%95%8F%E9%A1%8C%26%E4%B8%80%E7%AD%86%E7%95%AB%E5%95%8F%E9%A1%8C.html class=md-nav__link> <span class=md-ellipsis> 七橋問題&一筆畫問題 </span> </a> </li> <li class=md-nav__item> <a href=%E8%B3%AA%E6%95%B8%E3%80%81%E6%89%BE%E8%B3%AA%E5%9B%A0%E6%95%B8%28%E5%9F%83%E6%B0%8F%E7%AF%A9%29.html class=md-nav__link> <span class=md-ellipsis> 質數、找質因數(埃氏篩) </span> </a> </li> <li class=md-nav__item> <a href=%E5%9B%A0%E6%95%B8%E5%80%8D%E6%95%B8.html class=md-nav__link> <span class=md-ellipsis> 因數倍數 </span> </a> </li> <li class=md-nav__item> <a href=%E6%AD%90%E5%B9%BE%E9%87%8C%E5%BE%97%E5%BC%95%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> 歐幾里得引理 </span> </a> </li> <li class=md-nav__item> <a href=%E6%AD%90%E5%B9%BE%E9%87%8C%E5%BE%97%E6%BC%94%E7%AE%97%E6%B3%95%EF%BC%9B%E8%BC%BE%E8%BD%89%E7%9B%B8%E9%99%A4%E6%B3%95%EF%BC%9B%E6%9C%80%E5%A4%A7%E5%85%AC%E5%9B%A0%E6%95%B8gcd.html class=md-nav__link> <span class=md-ellipsis> 歐幾里得演算法；輾轉相除法；最大公因數gcd </span> </a> </li> <li class=md-nav__item> <a href=%E6%93%B4%E5%B1%95%E6%AD%90%E5%B9%BE%E9%87%8C%E5%BE%97%E6%BC%94%E7%AE%97%E6%B3%95.html class=md-nav__link> <span class=md-ellipsis> 擴展歐幾里得演算法 </span> </a> </li> <li class=md-nav__item> <a href=%E6%AD%90%E6%8B%89%E5%87%BD%E6%95%B8.html class=md-nav__link> <span class=md-ellipsis> 歐拉函數 </span> </a> </li> <li class=md-nav__item> <a href=%E7%9F%A9%E9%99%A3%E9%81%8B%E7%AE%97.html class=md-nav__link> <span class=md-ellipsis> 矩陣運算 </span> </a> </li> <li class=md-nav__item> <a href=%E5%8D%A1%E5%A1%94%E8%98%AD%E6%95%B8.html class=md-nav__link> <span class=md-ellipsis> 卡塔蘭數(Catalan Numbers) </span> </a> </li> <li class=md-nav__item> <a href=%E5%A4%A7%E6%95%B8%E9%81%8B%E7%AE%97.html class=md-nav__link> <span class=md-ellipsis> 大數運算 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_5> <label class=md-nav__link for=__nav_1_5 id=__nav_1_5_label tabindex=0> <span class=md-ellipsis> 資料結構 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_5_label aria-expanded=false> <label class=md-nav__title for=__nav_1_5> <span class="md-nav__icon md-icon"></span> 資料結構 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=STL.html class=md-nav__link> <span class=md-ellipsis> STL </span> </a> </li> <li class=md-nav__item> <a href=%E5%AD%97%E5%85%83%E3%80%81%E5%AD%97%E4%B8%B2.html class=md-nav__link> <span class=md-ellipsis> 字元、字串 </span> </a> </li> <li class=md-nav__item> <a href=%E9%8F%88%E7%B5%90%E7%B5%90%E6%A7%8B.html class=md-nav__link> <span class=md-ellipsis> 鏈結結構 </span> </a> </li> <li class=md-nav__item> <a href=map.html class=md-nav__link> <span class=md-ellipsis> map </span> </a> </li> <li class=md-nav__item> <a href=%E5%84%AA%E5%85%88%E6%9F%B1%E5%88%97%28priority_queue%29.html class=md-nav__link> <span class=md-ellipsis> 優先柱列(priority_queue) </span> </a> </li> <li class=md-nav__item> <a href=%E7%B7%9A%E6%AE%B5%E6%A8%B9.html class=md-nav__link> <span class=md-ellipsis> 線段樹 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_6 checked> <label class=md-nav__link for=__nav_1_6 id=__nav_1_6_label tabindex=0> <span class=md-ellipsis> 演算法 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_6_label aria-expanded=true> <label class=md-nav__title for=__nav_1_6> <span class="md-nav__icon md-icon"></span> 演算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=%E9%81%9E%E8%BF%B4.html class=md-nav__link> <span class=md-ellipsis> 遞迴 </span> </a> </li> <li class=md-nav__item> <a href=%E7%88%86%E6%90%9C.html class=md-nav__link> <span class=md-ellipsis> 爆搜 </span> </a> </li> <li class=md-nav__item> <a href=%E5%89%8D%E7%B6%B4%E5%92%8C%26%E5%B7%AE%E5%88%86.html class=md-nav__link> <span class=md-ellipsis> 前綴和&差分 </span> </a> </li> <li class=md-nav__item> <a href=%E6%90%9C%E5%B0%8B%E3%80%81%E4%BA%8C%E5%88%86%E6%90%9C%E5%B0%8B%E3%80%81%E8%B7%B3%E8%BA%8D%E4%BA%8C%E5%88%86%E6%90%9C.html class=md-nav__link> <span class=md-ellipsis> 搜尋、二分搜尋、跳躍二分搜 </span> </a> </li> <li class=md-nav__item> <a href=%E5%93%88%E5%B8%8C%E8%A1%A8.html class=md-nav__link> <span class=md-ellipsis> 哈希表 </span> </a> </li> <li class=md-nav__item> <a href=%E9%9B%A2%E6%95%A3%E5%8C%96.html class=md-nav__link> <span class=md-ellipsis> 離散化 </span> </a> </li> <li class=md-nav__item> <a href=%E5%BF%AB%E9%80%9F%E5%86%AA.html class=md-nav__link> <span class=md-ellipsis> 快速冪 </span> </a> </li> <li class=md-nav__item> <a href=%E6%BB%91%E5%8B%95%E8%A6%96%E7%AA%97%28Sliding%20window%29%28%E6%8A%80%E5%B7%A7%29.html class=md-nav__link> <span class=md-ellipsis> 滑動視窗(Sliding window)(技巧) </span> </a> </li> <li class=md-nav__item> <a href=%E6%8E%83%E7%9E%84%E7%B7%9A%E6%BC%94%E7%AE%97%E6%B3%95.html class=md-nav__link> <span class=md-ellipsis> 掃瞄線演算法 </span> </a> </li> <li class=md-nav__item> <a href=/%E7%88%86%E6%90%9C.html#%E4%B8%89%E6%8A%98%E5%8D%8A%E6%9E%9A%E8%88%89 class=md-nav__link> <span class=md-ellipsis> 折半枚舉 </span> </a> </li> <li class=md-nav__item> <a href=%E8%B2%AA%E5%BF%83%E6%BC%94%E7%AE%97%E6%B3%95%28Greedy%29.html class=md-nav__link> <span class=md-ellipsis> 貪心演算法(Greedy) </span> </a> </li> <li class=md-nav__item> <a href=%E5%8B%95%E6%85%8B%E8%A6%8F%E5%8A%83%28dp%29.html class=md-nav__link> <span class=md-ellipsis> 動態規劃(dp) </span> </a> </li> <li class=md-nav__item> <a href=%E5%9C%96%E8%AB%96.html class=md-nav__link> <span class=md-ellipsis> 圖論 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 樹論 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=%E6%A8%B9%E8%AB%96.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 樹論 </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#題型整理 class=md-nav__link> <span class=md-ellipsis> 題型整理 </span> </a> </li> <li class=md-nav__item> <a href=#樹簡介 class=md-nav__link> <span class=md-ellipsis> 樹簡介 </span> </a> </li> <li class=md-nav__item> <a href=#基本性質 class=md-nav__link> <span class=md-ellipsis> 基本性質 </span> </a> </li> <li class=md-nav__item> <a href=#計算子樹大小 class=md-nav__link> <span class=md-ellipsis> 計算子樹大小 </span> </a> </li> <li class=md-nav__item> <a href=#判斷根結點葉節點 class=md-nav__link> <span class=md-ellipsis> 判斷根結點、葉節點 </span> </a> </li> <li class=md-nav__item> <a href=#top-downbutton-up class=md-nav__link> <span class=md-ellipsis> top-down、button-up </span> </a> </li> <li class=md-nav__item> <a href=#直徑問題 class=md-nav__link> <span class=md-ellipsis> 直徑問題 </span> </a> <nav class=md-nav aria-label=直徑問題> <ul class=md-nav__list> <li class=md-nav__item> <a href=#farthest-of-farthest-演算法 class=md-nav__link> <span class=md-ellipsis> farthest of farthest 演算法 </span> </a> </li> <li class=md-nav__item> <a href=#a060-201603_q4-血緣關係 class=md-nav__link> <span class=md-ellipsis> a060: 201603_q4 血緣關係 </span> </a> </li> <li class=md-nav__item> <a href=#a143-q_8_15-樹上一位不回家的推銷員 class=md-nav__link> <span class=md-ellipsis> a143: Q_8_15 樹上一位不回家的推銷員 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#重心 class=md-nav__link> <span class=md-ellipsis> 重心 </span> </a> </li> <li class=md-nav__item> <a href=#圓心 class=md-nav__link> <span class=md-ellipsis> 圓心 </span> </a> </li> <li class=md-nav__item> <a href=#lca class=md-nav__link> <span class=md-ellipsis> LCA </span> </a> <nav class=md-nav aria-label=LCA> <ul class=md-nav__list> <li class=md-nav__item> <a href=#d767-血緣關係 class=md-nav__link> <span class=md-ellipsis> d767. 血緣關係 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#題目練習 class=md-nav__link> <span class=md-ellipsis> 題目練習 </span> </a> <nav class=md-nav aria-label=題目練習> <ul class=md-nav__list> <li class=md-nav__item> <a href=#p-8-1-樹上的推銷員 class=md-nav__link> <span class=md-ellipsis> P-8-1. 樹上的推銷員 </span> </a> </li> <li class=md-nav__item> <a href=#a128-p_8_2-物流派送系統 class=md-nav__link> <span class=md-ellipsis> a128: P_8_2 物流派送系統 </span> </a> </li> <li class=md-nav__item> <a href=#a129-p_8_3-購物中心選位置 class=md-nav__link> <span class=md-ellipsis> a129: P_8_3 購物中心選位置 </span> </a> </li> <li class=md-nav__item> <a href=#a078-p_3_1-樹的高度與根-bottom-up-apcs201710 class=md-nav__link> <span class=md-ellipsis> a078: P_3_1 樹的高度與根 (bottom-up) (APCS201710) </span> </a> </li> <li class=md-nav__item> <a href=#a131-p_8_5-自動分裝-apcs202002 class=md-nav__link> <span class=md-ellipsis> a131: P_8_5 自動分裝 (APCS202002) </span> </a> </li> <li class=md-nav__item> <a href=#a223-q_8_6-樹狀圖的距離總和 class=md-nav__link> <span class=md-ellipsis> a223: Q_8_6 樹狀圖的距離總和 </span> </a> </li> <li class=md-nav__item> <a href=#a132-p_8_7-寶石的顏色-108全國高中賽 class=md-nav__link> <span class=md-ellipsis> a132: P_8_7 寶石的顏色 (108全國高中賽) </span> </a> </li> <li class=md-nav__item> <a href=#a133-p_8_8-樹的最大獨立集 class=md-nav__link> <span class=md-ellipsis> a133: P_8_8 樹的最大獨立集 </span> </a> </li> <li class=md-nav__item> <a href=#a224-q_8_9-服務中心選位置 class=md-nav__link> <span class=md-ellipsis> a224: Q_8_9 服務中心選位置 </span> </a> </li> <li class=md-nav__item> <a href=#a225-q_8_10-竊聽間諜網 class=md-nav__link> <span class=md-ellipsis> a225: Q_8_10 竊聽間諜網 </span> </a> </li> <li class=md-nav__item> <a href=#a134-p_8_11-公司派對-ncpc class=md-nav__link> <span class=md-ellipsis> a134: P_8_11 公司派對 (NCPC) </span> </a> </li> <li class=md-nav__item> <a href=#a144-q_8_12-佔領連續的城鎮 class=md-nav__link> <span class=md-ellipsis> a144: Q_8_12 佔領連續的城鎮 </span> </a> </li> <li class=md-nav__item> <a href=#a135-p_8_13-不同成本的購物中心- class=md-nav__link> <span class=md-ellipsis> a135: P_8_13 不同成本的購物中心 (@@) </span> </a> </li> <li class=md-nav__item> <a href=#a142-q_8_16病毒演化-apcs202007 class=md-nav__link> <span class=md-ellipsis> a142: Q_8_16.病毒演化 (APCS202007) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_7> <label class=md-nav__link for=__nav_1_7 id=__nav_1_7_label tabindex=0> <span class=md-ellipsis> 刷題 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_7_label aria-expanded=false> <label class=md-nav__title for=__nav_1_7> <span class="md-nav__icon md-icon"></span> 刷題 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=CSEC.html class=md-nav__link> <span class=md-ellipsis> CSEC </span> </a> </li> <li class=md-nav__item> <a href=%E5%8C%97%E5%B8%82%E5%AD%B8%E7%A7%91%E8%83%BD%E5%8A%9B%E7%AB%B6%E8%B3%BD.html class=md-nav__link> <span class=md-ellipsis> 北市學科能力競賽 </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_7_3> <label class=md-nav__link for=__nav_1_7_3 id=__nav_1_7_3_label tabindex=0> <span class=md-ellipsis> APCS歷屆 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_1_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_1_7_3> <span class="md-nav__icon md-icon"></span> APCS歷屆 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href="https://docs.google.com/spreadsheets/d/15ANYkk1BhHBNcZINYVzdzh2dG11dVd4kMIbcF5l6_h8/edit?usp=sharing" class=md-nav__link> <span class=md-ellipsis> 統整 </span> </a> </li> <li class=md-nav__item> <a href="https://docs.google.com/spreadsheets/d/1B1qI4OE_O4UAc3L77vzmrFFC27ZiMnlh96KpgyUQAgs/edit#gid=0" class=md-nav__link> <span class=md-ellipsis> 編年/題庫(by YUI HUANG) </span> </a> </li> <li class=md-nav__item> <a href=%E5%AF%A6%E4%BD%9C%E4%B8%80.html class=md-nav__link> <span class=md-ellipsis> 實作一 </span> </a> </li> <li class=md-nav__item> <a href=%E5%AF%A6%E4%BD%9C%E4%BA%8C.html class=md-nav__link> <span class=md-ellipsis> 實作二 </span> </a> </li> <li class=md-nav__item> <a href=%E5%AF%A6%E4%BD%9C%E4%B8%89.html class=md-nav__link> <span class=md-ellipsis> 實作三 </span> </a> </li> <li class=md-nav__item> <a href=%E5%AF%A6%E4%BD%9C%E5%9B%9B.html class=md-nav__link> <span class=md-ellipsis> 實作四 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_8> <label class=md-nav__link for=__nav_1_8 id=__nav_1_8_label tabindex=0> <span class=md-ellipsis> 其他 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_8_label aria-expanded=false> <label class=md-nav__title for=__nav_1_8> <span class="md-nav__icon md-icon"></span> 其他 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=APCS.html class=md-nav__link> <span class=md-ellipsis> APCS </span> </a> </li> <li class=md-nav__item> <a href=%E4%BD%BF%E7%94%A8vscode%E6%92%B0%E5%AF%ABc%2B%2B.html class=md-nav__link> <span class=md-ellipsis> 使用vscode撰寫c++ </span> </a> </li> <li class=md-nav__item> <a href=%E5%B8%B8%E7%94%A8%E8%8B%B1%E6%96%87.html class=md-nav__link> <span class=md-ellipsis> 常用英文 </span> </a> </li> <li class=md-nav__item> <a href=hackmd%E7%89%B9%E6%AE%8A%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> hackmd特殊使用 </span> </a> </li> <li class=md-nav__item> <a href=%E5%84%AA%E8%B3%AA%E7%B6%B2%E7%AB%99.html class=md-nav__link> <span class=md-ellipsis> 優質網站 </span> </a> </li> <li class=md-nav__item> <a href=%E7%87%9F%E9%9A%8A.html class=md-nav__link> <span class=md-ellipsis> 營隊 </span> </a> </li> <li class=md-nav__item> <a href=%E6%89%93%E5%AD%97%E9%9F%B3%E6%95%88.html class=md-nav__link> <span class=md-ellipsis> 打字音效 </span> </a> </li> <li class=md-nav__item> <a href=%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90.html class=md-nav__link> <span class=md-ellipsis> 資料來源 </span> </a> </li> <li class=md-nav__item> <a href=%E5%8A%A0%E6%B7%B1%E5%8A%A0%E5%BB%A3.html class=md-nav__link> <span class=md-ellipsis> 加深加廣 </span> </a> </li> <li class=md-nav__item> <a href=%E5%AD%B8%E7%BF%92%E8%B3%87%E6%BA%90.html class=md-nav__link> <span class=md-ellipsis> 學習資源 </span> </a> </li> <li class=md-nav__item> <a href=%E6%B8%AC%E8%A9%A6.html class=md-nav__link> <span class=md-ellipsis> 測試 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=mack%E5%BE%AE%E7%A9%8D%E5%88%86.html class=md-nav__link> <span class=md-ellipsis> mack微積分 </span> </a> </li> <li class=md-nav__item> <a href=%E6%BB%BE%E7%90%83%E5%88%86%E9%9A%8A.html class=md-nav__link> <span class=md-ellipsis> 滾球分隊 </span> </a> </li> <li class=md-nav__item> <a href=mkdocs%E7%AD%86%E8%A8%98.html class=md-nav__link> <span class=md-ellipsis> mkdocs筆記 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=樹論>樹論<a class=headerlink href=#樹論 title="Permanent link"></a></h1> <h2 id=題型整理>題型整理<a class=headerlink href=#題型整理 title="Permanent link"></a></h2> <ol> <li>計算每個點到每個點之間距離<br> <a href=#a129-p_8_3-購物中心選位置>a129: P_8_3 購物中心選位置</a> <br> <a href=#a223-q_8_6-樹狀圖的距離總和>a223: Q_8_6 樹狀圖的距離總和</a> </li> <li>由下往上計算(bottom-up) <br> <a href=#a078-p_3_1-樹的高度與根-bottom-up-apcs201710>a078: P_3_1 樹的高度與根 (bottom-up) (APCS201710)</a> </li> <li>根節點比大小 <br> <a href=#a131-p_8_5-自動分裝-apcs202002>a131: P_8_5 自動分裝 (APCS202002)</a> </li> <li>陣列傳遞，計算極值 <br> <a href=#a132-p_8_7-寶石的顏色-108全國高中賽>a132: P_8_7 寶石的顏色 (108全國高中賽)</a> </li> <li>不相鄰DP <br> <a href=#a133-p_8_8-樹的最大獨立集>a133: P_8_8 樹的最大獨立集</a> <br> <a href=#a224-q_8_9-服務中心選位置>a224: Q_8_9 服務中心選位置</a> <br> <a href=#a225-q_8_10-竊聽間諜網>a225: Q_8_10 竊聽間諜網</a> </li> <li>背包問題DP <br> <a href=#a134-p_8_11-公司派對-ncpc>a134: P_8_11 公司派對 (NCPC)</a>：組合、選一個→倒序(bottom-up) <br> <a href=#a144-q_8_12-佔領連續的城鎮>a144: Q_8_12 佔領連續的城鎮</a>：bottom-up，連續元素的和 </li> <li>有夠難(DP) <br> <a href=#a135-p_8_13-不同成本的購物中心->a135: P_8_13 不同成本的購物中心 (@@)</a> <br> <a href=#a142-q_8_16病毒演化-apcs202007>a142: Q_8_16.病毒演化 (APCS202007)</a> </li> <li>直徑問題 【farthest of farthest 演算法】 <br> <a href=#a060-201603_q4-血緣關係>a060: 201603_q4 血緣關係</a> <br> <a href=#a143-q_8_15-樹上一位不回家的推銷員>a143: Q_8_15 樹上一位不回家的推銷員</a> </li> </ol> <blockquote> <p>樹的DP若在一個點有不同則方式(例如節點1可以放置A、B、C、D)直接設置多維陣列，如：dp[i][j]=節點i選擇放置j型態，例題如<a href=#a142-Q_8_16病毒演化-APCS202007>a142: Q_8_16.病毒演化 (APCS202007)</a></p> </blockquote> <h2 id=樹簡介>樹簡介<a class=headerlink href=#樹簡介 title="Permanent link"></a></h2> <p><a href=https://web.ntnu.edu.tw/~algo/Tree.html>https://web.ntnu.edu.tw/~algo/Tree.html</a></p> <p><a href=https://tioj.ck.tp.edu.tw/uploads/attachment/5/13/3.pdf>https://tioj.ck.tp.edu.tw/uploads/attachment/5/13/3.pdf</a></p> <p>樹沒有環，所以相較於有環的圖簡單很多。同時，也多出了很多性質可以利用。樹的 幾個性質列舉如下： 1. 連通且邊數等於點數減一。 2. 任意兩個點之間存在唯一的簡單路徑。 3. 連通，但去掉任意一條邊就不連通。 4. 沒有環，但加上任意一條邊就有環。 　　以上四個性質是等價的。這也是判斷一個圖是不是樹的方法。</p> <h2 id=基本性質>基本性質<a class=headerlink href=#基本性質 title="Permanent link"></a></h2> <p>在此先介紹幾個基本的、專屬於樹的術語（樹語？）： <br> 1. 根（root）：在一個樹上可以選定一個點做為「根」。有限定根的樹稱為「有根樹」。 <br> 2. 葉（leaf）：無根樹中，度數為1的點稱為「葉」；有根樹中，度數為1且非根的點稱為 <br> 「葉」，但只有一個點的情況，根也是葉。 <br> 3. 子樹（subtree）：移除一個點之後，原樹會被切割成很多棵樹，稱為子樹。在有根樹中， <br> 子樹通常指遠離根的那些樹。 <br> 4. 父、子關係（parent,child）：有根樹中，如果vi,vj 相鄰，且vi 比較接近根，稱vi 是vj <br> 的父親、vj 是vi的兒子。 <br> 5. 祖先、後代關係（ancestor,descendant）：一個點的小孩、小孩的小孩⋯⋯等等皆稱為其 <br> 「後代」；一個點的父親、父親的父親⋯⋯等等皆稱為其「祖先」。 <br> 6. 距離（distance）：兩點間的距離是它們之間路徑的邊數，或者是路徑上邊權的加總。 <br> 7. 深度（depth）：有根樹中，一個點的深度是它到根的距離稱為深度。 <br> 8. 高度（height）：有根樹中，一個點到與它距離最大的葉的距離稱為高度。根的高度稱為這整顆樹的高度。 </p> <p>判斷父子關係、祖先後代關係可以用一次的DFS預處理，即可達到O(1)查詢。父子 <br> 關係只要對每個點記錄它的父親是誰即可；祖先後代關係則可以在DFS時記錄進入該點 <br> 和離開該點的時間，當點A的時間區間被點B完全覆蓋，則A是B的後代。 <br> 距離、深度的部分，可用簡單的DFS求出一點到所有點的距離。高度的話，因為葉 <br> 子的高度是0，而一個點的高度等於所有子樹中高度加連向子樹的邊權的最大值，所以照 <br> 樣可以用DFS解決。 <br> 順帶一提，因為樹沒有環，所以在DFS時不需要記錄一個點有沒有被造訪過，只要 <br> 知道父親是哪個點，不要往回走即可。 </p> <h2 id=計算子樹大小>計算子樹大小<a class=headerlink href=#計算子樹大小 title="Permanent link"></a></h2> <p><a href=#a129-p_8_3-購物中心選位置>a129: P_8_3 購物中心選位置</a></p> <h2 id=判斷根結點葉節點>判斷根結點、葉節點<a class=headerlink href=#判斷根結點葉節點 title="Permanent link"></a></h2> <p>判斷根節點、葉節點方法(之一)：看入度、出度</p> <h2 id=top-downbutton-up>top-down、button-up<a class=headerlink href=#top-downbutton-up title="Permanent link"></a></h2> <div class=highlight><pre><span></span><code><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>    </span><span class=c1>//進入子節點  top-down</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>    </span><span class=c1>//離開子節點  button-up</span>
<span class=p>}</span>
</code></pre></div> <h2 id=直徑問題>直徑問題<a class=headerlink href=#直徑問題 title="Permanent link"></a></h2> <p>一棵樹的直徑定義為樹當中最遠的兩點間的簡單路徑；圓心是能使樹高度最小的根。<br> 要如何找出一棵樹的直徑呢？<br> 有一個很簡單的方法：先從任意一個點DFS到深度最深的點v，再從v點DFS到最遠的點u，則v、u的簡單路徑即為直徑。這個方法的正確性不難證，可以自己嘗試看看。 <br> </p> <h3 id=farthest-of-farthest-演算法>farthest of farthest 演算法<a class=headerlink href=#farthest-of-farthest-演算法 title="Permanent link"></a></h3> <blockquote> <p>GPT： <br> 計算一棵樹的直徑是計算圖論中的一個常見問題。在這裡的「樹」指的是一種特殊的圖，其中任何兩個節點都有一條唯一的路徑連接它們，且不含任何循環。樹的直徑定義為樹中所有節點對的最長距離， 即最遠的兩個節點之間的路徑長度。 <br> 計算樹的直徑通常有幾種方法，其中最常見的是使用兩次廣度優先搜索（BFS）： </p> <ol> <li> <p><strong>隨機選擇一個節點</strong>：從樹中隨機選擇一個節點 𝑣 v。 </p> </li> <li> <p><strong>第一次 BFS</strong>：從節點 𝑣 v 開始進行 BFS，找到距離 𝑣 v 最遠的節點 𝑢 。 </p> </li> <li> <p><strong>第二次 BFS</strong>：從節點 𝑢 u 開始進行第二次 BFS，找到距離 𝑢 最遠的節點 𝑤。 </p> </li> <li> <p><strong>計算直徑</strong>：節點 𝑢 到節點 𝑤 的距離就是樹的直徑。 </p> </li> </ol> <p>這個方法之所以有效，是因為從任意點出發，找到的最遠點一定是從這個點出發的最長路徑上的端點之一，再從這個端點開始找最遠點，這樣保證能找到整棵樹的最長路徑。 <br> 如果需要更具體的實現或解釋，隨時告訴我！ </p> </blockquote> <h3 id=a060-201603_q4-血緣關係>a060: 201603_q4 血緣關係<a class=headerlink href=#a060-201603_q4-血緣關係 title="Permanent link"></a></h3> <iframe src=https://drive.google.com/file/d/1KLN8uow9WGAGrZwYADxiWyUsJ8w6_2VV/preview width=100% height=1010px></iframe> <blockquote> <p>方法1： 先計算出所以節點的最大樹枝長度 再對於每個點，找到兩最大樹枝加總， 以下為範例一</p> </blockquote> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image-55.png></p> <div class=collapse-code><input checked=checked id=__collapse0 name=__collapse0 type=checkbox><div class=highlight><span class=filename>找最大、第二大值方式</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>m1</span><span class=o>=</span><span class=n>INT_MIN</span><span class=p>,</span><span class=n>m2</span><span class=o>=</span><span class=n>INT_MIN</span><span class=p>;</span><span class=w> </span><span class=c1>// 初始化為最小整數</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>};</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=mi>7</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>m1</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>m2</span><span class=o>=</span><span class=n>m1</span><span class=p>;</span><span class=w> </span><span class=c1>// 將當前最大值更新為第二大值</span>
<span class=w>            </span><span class=n>m1</span><span class=o>=</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=w> </span><span class=c1>// 更新最大值</span>
<span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>m2</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>m2</span><span class=o>=</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=w> </span><span class=c1>// 更新第二大值</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>m1</span><span class=o>&lt;&lt;</span><span class=s>&quot; &quot;</span><span class=o>&lt;&lt;</span><span class=n>m2</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=p>;</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse0 tabindex=0 title=expand></label><label class=collapse for=__collapse0 tabindex=0 title=collapse></label></div> </div> <div class=collapse-code><input checked=checked id=__collapse1 name=__collapse1 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N int(1e5)+1</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>m1</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>m2</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>

<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>m1</span><span class=p>){</span><span class=w>                </span><span class=c1>//找到子節點中兩個最大的長度</span>
<span class=w>                </span><span class=n>m2</span><span class=o>=</span><span class=n>m1</span><span class=p>;</span>
<span class=w>                </span><span class=n>m1</span><span class=o>=</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>m2</span><span class=p>){</span>
<span class=w>                </span><span class=n>m2</span><span class=o>=</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>ans</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>ans</span><span class=p>,</span><span class=n>m1</span><span class=o>+</span><span class=n>m2</span><span class=p>);</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+=</span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;8 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>0 3 \</span>
<span class=c1>7 0 \</span>
<span class=c1>1 4 \</span>
<span class=c1>1 5 \</span>
<span class=c1>3 6 \</span>
<span class=c1>&quot;);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;4 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>2 3&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse1 tabindex=0 title=expand></label><label class=collapse for=__collapse1 tabindex=0 title=collapse></label></div> </div> <blockquote> <p>方法2： <br> 概念同方法一，變換找最大值、第二大值的合方式 <br> 如下： <br> 假設數列是 S，pm 是prefix_max，則最大兩個元素之和其實就是max(S[i]+pm(i): for all i)。 <br> 所以我們只需要一路掃描並維護好目前看到的最大值，每次將當下看到的值加上他之前的最大值相加即可。 </p> </blockquote> <div class=collapse-code><input checked=checked id=__collapse2 name=__collapse2 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>m1</span><span class=o>=</span><span class=n>INT_MIN</span><span class=p>,</span><span class=n>m2</span><span class=o>=</span><span class=n>INT_MIN</span><span class=p>;</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>};</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>prefix_max</span><span class=o>=-</span><span class=n>INT_MIN</span><span class=p>;</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>sum</span><span class=p>,</span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=mi>7</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>ans</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>ans</span><span class=p>,</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>+</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>]);</span><span class=w>  </span><span class=c1>//ans=最大、第二大相加</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=mi>-1</span><span class=p>],</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span><span class=w>  </span><span class=c1>//v[i]為prefix_max</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse2 tabindex=0 title=expand></label><label class=collapse for=__collapse2 tabindex=0 title=collapse></label></div> </div> <div class=collapse-code><input checked=checked id=__collapse3 name=__collapse3 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N int(1e5)+1</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>int</span><span class=w> </span><span class=n>m</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>            </span><span class=n>m</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>m</span><span class=p>,</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+=</span><span class=mi>1</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;8 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>0 3 \</span>
<span class=c1>7 0 \</span>
<span class=c1>1 4 \</span>
<span class=c1>1 5 \</span>
<span class=c1>3 6 \</span>
<span class=c1>&quot;);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;4 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>2 3&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>m</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse3 tabindex=0 title=expand></label><label class=collapse for=__collapse3 tabindex=0 title=collapse></label></div> </div> <blockquote> <p>方法三： <br> farthest of farthest 演算法 <br> 兩次DFS <br> 第一次找f的最遠點i，第二次找i最遠點k </p> </blockquote> <div class=collapse-code><input checked=checked id=__collapse4 name=__collapse4 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N int(1e5)+1</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>int</span><span class=w> </span><span class=n>m</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>d</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>mv</span><span class=o>=</span><span class=mi>-1</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>md</span><span class=o>=</span><span class=mi>-1</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=n>d</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>md</span><span class=p>){</span>
<span class=w>                </span><span class=n>md</span><span class=o>=</span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>                </span><span class=n>mv</span><span class=o>=</span><span class=n>i</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;8 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>0 3 \</span>
<span class=c1>7 0 \</span>
<span class=c1>1 4 \</span>
<span class=c1>1 5 \</span>
<span class=c1>3 6 \</span>
<span class=c1>&quot;);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;4 \</span>
<span class=c1>0 1 \</span>
<span class=c1>0 2 \</span>
<span class=c1>2 3&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>md</span><span class=o>=</span><span class=mi>-1</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=nb>false</span><span class=p>;</span>
<span class=w>        </span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=n>mv</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>d</span><span class=p>[</span><span class=n>mv</span><span class=p>];</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse4 tabindex=0 title=expand></label><label class=collapse for=__collapse4 tabindex=0 title=collapse></label></div> </div> <h3 id=a143-q_8_15-樹上一位不回家的推銷員>a143: Q_8_15 樹上一位不回家的推銷員<a class=headerlink href=#a143-q_8_15-樹上一位不回家的推銷員 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a143">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a143</a></p> <p>內容 有一個推銷員要走訪 n 個城市。這些城市以 (n−1)條道路連接，每條道路連接兩個不 同的城市並且雙向可以通行，而且已知每一個城市都可以到達，不會有到達不了的狀況。輸入道路的資料，請你幫推銷員找出一個最短的路徑走訪所有的城市，推銷員可 以從任何城市開始，也不必回到開始的城市，只要每個城市至少到一次就可以。 舉例來說，如右圖，有 5 個城市以 4條道路連接，假設 每條道路的長度都是 1。最短的拜訪路徑是 (1,0,4,2,4,3)，長度為 5。</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image-56.png></p> <p>輸入說明 <br> 第一行是正整數 n <br> ，代表城市的數量，城市是以 0∼(n−1) <br> 編號，接下來有 n−1 <br> 行是道路的資料，每行三個整數 a,b <br> 與 w <br> ，代表此道 路連接城市 a <br> 與 b <br> ，道路的長度是 w <br> 。n <br> 不超過 50000 <br> ，每條道路長度是不超過 100 <br> 的正整數。 </p> <p>輸出說明 <br> 輸出最短的旅行距離。 </p> <p>範例輸入 #1 <br> 5 <br> 1 0 1 <br> 0 4 1 <br> 2 4 1 <br> 4 3 1 <br> 範例輸出 #1 <br> 5 <br> 範例輸入 #2 <br> 3 <br> 1 2 5 <br> 0 2 3 <br> 範例輸出 #2 <br> 8 </p> <blockquote> <p>我們需要找到起點、終點，起點、終點間路徑只會路過一次，其餘路徑會路過兩次，全體最小化路徑，就是最大化起點、終點間路徑 <br> 使用權重作為距離，找出最大直徑。 <br> 全部路段長度*2-直徑即為答案 </p> </blockquote> <div class=collapse-code><input checked=checked id=__collapse5 name=__collapse5 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 100000</span>
<span class=cp>#define nn &quot;\n&quot;</span>

<span class=k>struct</span><span class=w> </span><span class=nc>st</span><span class=p>{</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=p>};</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=n>st</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>int</span><span class=w> </span><span class=n>vi</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>d</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>all_w</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>vi</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=n>st</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]){</span>
<span class=c1>//            cout&lt;&lt;f&lt;&lt;&quot;: &quot;&lt;&lt;i.x&lt;&lt;nn;</span>
<span class=w>            </span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]</span><span class=o>=</span><span class=n>d</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=n>i</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>1 0 1 \</span>
<span class=c1>0 4 1 \</span>
<span class=c1>2 4 1 \</span>
<span class=c1>4 3 1&quot;);</span>

<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=mi>-1</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=o>&gt;&gt;</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>all_w</span><span class=o>+=</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>x</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>re</span><span class=o>=</span><span class=n>max_element</span><span class=p>(</span><span class=n>d</span><span class=p>,</span><span class=n>d</span><span class=o>+</span><span class=n>n</span><span class=p>)</span><span class=o>-</span><span class=n>d</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=n>vi</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=nb>false</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=c1>//    cout&lt;&lt;nn;</span>

<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=n>re</span><span class=p>);</span>

<span class=c1>//    cout&lt;&lt;nn;</span>

<span class=w>    </span><span class=n>re</span><span class=o>=</span><span class=n>max_element</span><span class=p>(</span><span class=n>d</span><span class=p>,</span><span class=n>d</span><span class=o>+</span><span class=n>n</span><span class=p>)</span><span class=o>-</span><span class=n>d</span><span class=p>;</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>all_w</span><span class=o>*</span><span class=mi>2</span><span class=o>-</span><span class=n>d</span><span class=p>[</span><span class=n>re</span><span class=p>]</span><span class=o>&lt;&lt;</span><span class=n>nn</span><span class=p>;</span>
<span class=c1>//    cout&lt;&lt;re;</span>


<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse5 tabindex=0 title=expand></label><label class=collapse for=__collapse5 tabindex=0 title=collapse></label></div> </div> <h2 id=重心>重心<a class=headerlink href=#重心 title="Permanent link"></a></h2> <p>將重心刪掉後，分割後變成兩棵樹，兩棵樹總節點不超過總節點樹&frac12; <br> ex：n=15，分割後兩棵樹節點皆為7。(15/2=7.5，7&lt;=7.5) </p> <h2 id=圓心>圓心<a class=headerlink href=#圓心 title="Permanent link"></a></h2> <p>樹的圓心是這條最長路徑上的中間節點。如果直徑是奇數長度，則圓心是唯一的；如果直徑是偶數長度，則圓心是兩個相鄰的節點。</p> <h2 id=lca>LCA<a class=headerlink href=#lca title="Permanent link"></a></h2> <blockquote> <p>from <a href=https://hackmd.io/@konchin/ryhgIlhMu>https://hackmd.io/@konchin/ryhgIlhMu</a></p> </blockquote> <p>LCA (Lowest Common Ancestor / 最近共同祖先)</p> <p>何謂 LCA</p> <p>在一個有根樹 (或 DAG) 上，同時擁有 <span class=arithmatex>\(u\)</span>, <span class=arithmatex>\(v\)</span> 兩個點作為後代的點即為 <span class=arithmatex>\(u\)</span>, <span class=arithmatex>\(v\)</span> 兩點的 <span class=arithmatex>\(LCA\)</span></p> <p>如圖</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/ePU8X5N.png width=50%></p> <p>另外要注意，一個點本身也是自己的祖先，所以 <span class=arithmatex>\(LCA(x, v) = x\)</span></p> <h3 id=d767-血緣關係><a href="https://zerojudge.tw/ShowProblem?problemid=d767">d767. 血緣關係</a><a class=headerlink href=#d767-血緣關係 title="Permanent link"></a></h3> <p>內容 <br> 給一張祖譜,詢問 A , B 兩人關係最近的共同祖先 以及 A , B 之間的親等 <br> example 1 </p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image-2.png> </p> <p>親等計算 : 往上算到與要計算的人共同祖先處，再往下算到那個人，數多少就是幾親等。 </p> <p>※ 輸入的人的編號，必為 1~N ，而兒女編號必大於父母本身的編號。 </p> <p>輸入說明 <br> 第一行兩個數字 N , Q <br> 分別代表接下來會有 N 行數字分別代表該人的兒女編號(以 0 表結束)， <br> 再來會有 Q 行 <br> 每行上會有兩個數字 A , B ，代表要求出 A , B 兩人的關係最近的共同祖先 <br> 以及 A , B 之間的親等。 <br> 詳細請參考Sample Input。 <br> (N≦3,0000, 1≦A,B≦N, Q≦N2) </p> <p>輸出說明 <br> 輸出兩個數字最近的共同祖先 以及 A , B 之間的親等 </p> <div class=highlight><span class=filename>範例輸入 #1</span><pre><span></span><code><span class=mi>7</span><span class=w> </span><span class=mi>6</span>
<span class=mi>2</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=mi>0</span>
<span class=mi>4</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=mi>0</span>
<span class=mi>6</span><span class=w> </span><span class=mi>7</span><span class=w> </span><span class=mi>0</span>
<span class=mi>0</span>
<span class=mi>0</span>
<span class=mi>0</span>
<span class=mi>0</span>
<span class=mi>4</span><span class=w> </span><span class=mi>5</span>
<span class=mi>4</span><span class=w> </span><span class=mi>2</span>
<span class=mi>4</span><span class=w> </span><span class=mi>4</span>
<span class=mi>4</span><span class=w> </span><span class=mi>3</span>
<span class=mi>1</span><span class=w> </span><span class=mi>7</span>
<span class=mi>2</span><span class=w> </span><span class=mi>3</span>
</code></pre></div> <div class=highlight><span class=filename>範例輸出 #1</span><pre><span></span><code><span class=mi>2</span><span class=w> </span><span class=mi>2</span>
<span class=mi>2</span><span class=w> </span><span class=mi>1</span>
<span class=mi>4</span><span class=w> </span><span class=mi>0</span>
<span class=mi>1</span><span class=w> </span><span class=mi>3</span>
<span class=mi>1</span><span class=w> </span><span class=mi>2</span>
<span class=mi>1</span><span class=w> </span><span class=mi>2</span>
</code></pre></div> <h2 id=題目練習>題目練習<a class=headerlink href=#題目練習 title="Permanent link"></a></h2> <h3 id=p-8-1-樹上的推銷員>P-8-1. 樹上的推銷員<a class=headerlink href=#p-8-1-樹上的推銷員 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a127">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a127</a></p> <p>有一個推銷員要走訪n個城市並在結束後回到出發的城市。這些城市以n-1條道路連接，每條道路連接兩個不同的城市並且雙向可以通行，而且已知每一個城市都可以到達，不會有到達不了的狀況。</p> <p>輸入道路的資料，請你找出一個長度最短的程式走訪順序，因為這樣的順序很多，你必須輸出字典順序最小的那一個。字典順序是用來比較兩個序列的先後順序，其方法是由前往後找到第一個不相同的位置，該元素比較小的序列就是順序比較小，如同在英文字典中單字的順序一般。例如 (0,2,3,1)&lt;(0,3,1,2)，又(0,3,2,1)&lt;(1,0,2,3)。</p> <p>舉例來說，如右圖，有5個城市以4條道路連接，假設每條道路的長度都是1。字典順序最小的最短拜訪順序是(0,1,0,4,2,4,3,4,0)。</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/SkgV4dXNR.png> 輸入說明 <br> 第一行是正整數 n，代表城市的數量，城市是以 0 ~ (n-1) 編號。 <br> 接下來有 (n-1) 行是道路的資料，每行三個整數 a , b 與 w ，代表此道路連接城市 a 與 b，道路的長度是 w。 <br> n 不超過 50000，每條道路長度是不超過 100 的正整數。 </p> <p>輸出說明 <br> 第一行輸出最短的旅行距離，第二行輸出拜訪順序，相鄰的數字之間要以一個空白間格。 </p> <p>範例輸入 #1 <br> 5 <br> 1 0 1 <br> 0 4 1 <br> 2 4 1 <br> 4 3 1 </p> <p>範例輸出 #1 <br> 8 <br> 0 1 0 4 2 4 3 4 0 </p> <p>範例輸入 #2 <br> 3 <br> 1 2 5 <br> 0 2 3 </p> <p>範例輸出 #2 <br> 16 <br> 0 2 1 2 0 </p> <div class=collapse-code><input checked=checked id=__collapse6 name=__collapse6 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 50010</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define nnn &quot; &quot;</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=nb>false</span><span class=p>};</span>

<span class=kt>int</span><span class=w> </span><span class=n>ans1</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>ans2</span><span class=p>;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=n>ans2</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>f</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]){</span>
<span class=w>            </span><span class=c1>//cout&lt;&lt;i&lt;&lt;nnn;</span>
<span class=w>            </span><span class=n>ans1</span><span class=o>+=</span><span class=n>i</span><span class=p>.</span><span class=n>second</span><span class=o>*</span><span class=mi>2</span><span class=p>;</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
<span class=w>            </span><span class=n>ans2</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>f</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>1 0 1 \</span>
<span class=c1>0 4 1 \</span>
<span class=c1>2 4 1 \</span>
<span class=c1>4 3 1&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=mi>-1</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=o>&gt;&gt;</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>x</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>sort</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>begin</span><span class=p>(),</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>end</span><span class=p>());</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans1</span><span class=o>&lt;&lt;</span><span class=n>nn</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>ans2</span><span class=p>){</span>
<span class=w>        </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>i</span><span class=o>&lt;&lt;</span><span class=s>&quot; &quot;</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse6 tabindex=0 title=expand></label><label class=collapse for=__collapse6 tabindex=0 title=collapse></label></div> </div> <h3 id=a128-p_8_2-物流派送系統>a128: P_8_2 物流派送系統<a class=headerlink href=#a128-p_8_2-物流派送系統 title="Permanent link"></a></h3> <p>有一個物流派送系統，系統有n個工作站與n-1條輸送帶，工作站以0~n-1編號，其中0號站是進貨站，所有物品都是由0號站進入系統然後經過輸送帶配送到某個站。每個輸送帶都是單向的從某個站a把物品送到站b，輸送的時間是w(a,b)。</p> <p>已知由進貨站可以經由輸送帶直接或間接轉送到達任何其他站，請計算下列兩者 <br> (1). 由進貨站到達運送時間最長的站需要多少時間 <br> (2). 由進貨站需要最多次轉運的需要經過幾次輸送帶。 <br> 舉例來說，如右圖，有5個站以4條輸送帶連接，假設每條輸送帶的運送時間如圖上標示。需要最長運送的時間是3號站(2+4=6)，最多需要經過的輸送帶是兩次(2號站與3號站)。 </p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/SkEL6_XNR.png> 輸入說明 <br> 第一行是正整數n，n&gt;1，接下來有n-1行是輸送帶的資料，第i行2個整數x與w，代表此輸送帶連接x與i，輸送的時間是w。n不超過1e5，每條輸送帶的輸送時間是不超過1000的正整數。 </p> <p>輸出說明 <br> 第一行輸出最長的運送總時間，第二行輸出最多經過幾次輸送帶。第一行與第二行的答案不一定是同一個站，除了輸送帶以外的時間均忽略不記。 </p> <p>範例輸入 1 <br> 5 <br> 0 5 <br> 4 1 <br> 4 4 <br> 0 2 <br> 範例輸出 1 <br> 6 <br> 2 <br> 範例輸入 2 <br> 6 <br> 0 9 <br> 0 1 <br> 2 1 <br> 5 3 <br> 3 2 <br> 範例輸出 2 <br> 9 <br> 4 </p> <div class=collapse-code><input checked=checked id=__collapse7 name=__collapse7 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N int(1e5+1)</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define nnn &quot; &quot;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=nb>false</span><span class=p>};</span>
<span class=kt>int</span><span class=w> </span><span class=n>d</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
<span class=kt>int</span><span class=w> </span><span class=n>d1</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
<span class=kt>int</span><span class=w> </span><span class=n>ans1</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span><span class=n>ans2</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]){</span>
<span class=w>            </span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]</span><span class=o>=</span><span class=n>d</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=n>i</span><span class=p>.</span><span class=n>second</span><span class=p>;</span>
<span class=w>            </span><span class=n>d1</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]</span><span class=o>=</span><span class=n>d1</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=n>ans1</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>d</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>],</span><span class=n>ans1</span><span class=p>);</span>
<span class=w>            </span><span class=n>ans2</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>d1</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>],</span><span class=n>ans2</span><span class=p>);</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>0 5 \</span>
<span class=c1>4 1 \</span>
<span class=c1>4 4 \</span>
<span class=c1>0 2&quot;);</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;6 \</span>
<span class=c1>0 9 \</span>
<span class=c1>0 1 \</span>
<span class=c1>2 1 \</span>
<span class=c1>5 3 \</span>
<span class=c1>3 2&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=o>&gt;&gt;</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>i</span><span class=p>,</span><span class=n>z</span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans1</span><span class=o>&lt;&lt;</span><span class=n>nn</span><span class=o>&lt;&lt;</span><span class=n>ans2</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse7 tabindex=0 title=expand></label><label class=collapse for=__collapse7 tabindex=0 title=collapse></label></div> </div> <h3 id=a129-p_8_3-購物中心選位置>a129: P_8_3 購物中心選位置<a class=headerlink href=#a129-p_8_3-購物中心選位置 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a129">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a129</a></p> <p>內容 <br> 有 n <br> 個小村莊以 0 <br> ~ n−1 <br> 編號，其中編號 0 <br> 的是市政府所在地，這些村莊以 n−1 <br> 條道路連接，每條道路都是雙向通行且連接兩個不同的村莊，已知從任一個村莊 i <br> 都可以經由這些道路到達市政府所在的 0 <br> 號村莊，所以也可以到達任何其他村莊，而且由村莊 i <br> 往市政府會經過的第一站村莊是 p(i)。 </p> <p>現在某大集團希望選其中一個村莊來蓋一個購物中心，選址的判斷方式是購物中心到所有村莊的距離總和要越小越好，請你幫忙計算哪一個村莊是最好的位置，到各村莊的距離總和最小是多少。 </p> <p>輸入說明 <br> 第一行是正整數 n，n&gt;1，村莊以 0~ n−1編號。 <br> 接下來有 n−1行是道路的資料， i由 1到 n−1，第 i行有 2個整數 p(i)與w(i)，代表 i往 0號村莊的道路第一個會經過 p(i)，而 i與 p(i)之間的道路長度是 w(i)。n不超過 105 <br> ，每條道路的長度是不超過 1000的正整數。 </p> <p>輸出說明 <br> 第一行輸出最佳的村莊編號，如果有超過一個村莊都是最佳位置，則找離市政府最遠的那一個， <br> 第二行輸出最佳村莊到各村莊距離總和。 </p> <p>範例輸入 #1 <br> 5 <br> 0 5 <br> 4 1 <br> 4 4 <br> 0 2 <br> 範例輸出 #1 <br> 4 <br> 14 <br> 範例輸入 #2 <br> 6 <br> 0 9 <br> 0 1 <br> 2 1 <br> 5 3 <br> 3 2 <br> 範例輸出 #2 <br> 3 <br> 21 </p> <hr> <p>這裡用到一個技巧：計算子數數量，也就是包含k，再k之下節點數量。 <br> 可用button up計算數量 </p> <hr> <div class=collapse-code><input checked=checked id=__collapse8 name=__collapse8 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define N int(1e5+10)</span>
<span class=cp>#define x first</span>
<span class=cp>#define y second</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>subtree</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>sumdis</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>ansdis</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>dis</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit1</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=nb>false</span><span class=p>},</span><span class=n>visit2</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=nb>false</span><span class=p>};</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>dfs1</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit1</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=n>subtree</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit1</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]){</span>
<span class=w>            </span><span class=c1>//cout&lt;&lt;i.first&lt;&lt;&quot; &quot;;</span>
<span class=w>            </span><span class=n>sumdis</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]</span><span class=o>=</span><span class=n>sumdis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=n>i</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
<span class=w>            </span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]</span><span class=o>=</span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=n>dfs1</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
<span class=w>            </span><span class=n>subtree</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+=</span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>];</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>dfs2</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit2</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit2</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>]){</span>
<span class=w>            </span><span class=n>ansdis</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ansdis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>]</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>y</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>.</span><span class=n>x</span><span class=p>])</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>i</span><span class=p>.</span><span class=n>y</span><span class=p>;</span>
<span class=w>            </span><span class=n>dfs2</span><span class=p>(</span><span class=n>i</span><span class=p>.</span><span class=n>first</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w>  </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>0 5 \</span>
<span class=c1>4 1 \</span>
<span class=c1>4 4 \</span>
<span class=c1>0 2 \</span>
<span class=c1>&quot;);</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>a</span><span class=o>&gt;&gt;</span><span class=n>b</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>});</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>a</span><span class=p>].</span><span class=n>push_back</span><span class=p>({</span><span class=n>i</span><span class=p>,</span><span class=n>b</span><span class=p>});</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs1</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>ansdis</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>+=</span><span class=n>sumdis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs2</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>mi_tree</span><span class=o>=</span><span class=n>INT_MIN</span><span class=p>,</span><span class=n>mi_dis</span><span class=o>=</span><span class=n>LONG_LONG_MAX</span><span class=p>,</span><span class=n>mi_index</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>ansdis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&lt;</span><span class=n>mi_dis</span><span class=p>){</span>
<span class=w>            </span><span class=n>mi_dis</span><span class=o>=</span><span class=n>ansdis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=n>mi_tree</span><span class=o>=</span><span class=n>sumdis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=n>mi_index</span><span class=o>=</span><span class=n>i</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>ansdis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=n>mi_dis</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>sumdis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>&gt;</span><span class=n>mi_tree</span><span class=p>){</span>
<span class=w>            </span><span class=n>mi_dis</span><span class=o>=</span><span class=n>ansdis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=n>mi_tree</span><span class=o>=</span><span class=n>sumdis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=n>mi_index</span><span class=o>=</span><span class=n>i</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>mi_index</span><span class=o>&lt;&lt;</span><span class=n>endl</span><span class=o>&lt;&lt;</span><span class=n>mi_dis</span><span class=o>&lt;&lt;</span><span class=n>nn</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse8 tabindex=0 title=expand></label><label class=collapse for=__collapse8 tabindex=0 title=collapse></label></div> </div> <h3 id=a078-p_3_1-樹的高度與根-bottom-up-apcs201710>a078: P_3_1 樹的高度與根 (bottom-up) (APCS201710)<a class=headerlink href=#a078-p_3_1-樹的高度與根-bottom-up-apcs201710 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a078">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a078</a></p> <p>內容 有一個大家族有 N 個成員，編號 1~N，我們請每個成員寫下此家族中哪幾位是他的孩 子。我們要計算每個人有幾代的子孫，這個值稱為他在這個族譜中的高度，也就是說， 編號 i 的人如果高度記做 h(i)，那麼 h(i)就表示在所有 i 的子孫中，最遠的子孫 與他隔了幾代。本題假設除了最高的一位祖先(稱為 root)之外，其他成員的 parent 都在此家族中(且只有一個 parent)。本題要計算所有成員高度的總和以及根的編 號。 右圖是一個例子，每個成員是一個圈起來 的號碼，劃線相聯的表示上面的點是下面 點的 parent。編號 4 是根，有兩個孩子 1 與 7。編號 6, 9, 3, 8 都沒有孩子， h(6)=h(9)=h(3)=h(8)=0，此外 h(2)=2 因為 9 與他隔兩代。你可以看出 來 h(5)=h(1)=1，h(7)=3, h(4)=4， 所以高度總和是 11。</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/B1f-8_8ER.png></p> <p>輸入說明 <br> 第一行有一個正整數 N。接下來有 N 行，第 i 行的第一個數字 k 代表 i 有 k 個孩子，第 i 行接下來的 k 個數字就是孩子的編號。每一行的相鄰數字間以空白隔 開。N ≤ 1e5。 </p> <p>輸出說明 <br> 第一行輸出根的編號，第二行輸出高度總和。 </p> <p>範例輸入 #1 <br> 9 <br> 1 6 <br> 3 5 3 8 <br> 0 <br> 2 1 7 <br> 1 9 <br> 0 <br> 1 2 <br> 0 <br> 0 </p> <p>範例輸出 #1 <br> 4 <br> 11 </p> <blockquote> <p>看到第11、12行 <div class=highlight><pre><span></span><code><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
</code></pre></div> 上面這樣寫的話是bottom-up的DP</p> <p>如果換成： <div class=highlight><pre><span></span><code><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
<span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
</code></pre></div> 就是top-down的DP</p> </blockquote> <div class=collapse-code><input checked=checked id=__collapse9 name=__collapse9 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define N 100000</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>rool</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>dis</span><span class=p>[</span><span class=n>N</span><span class=p>]</span><span class=o>=</span><span class=p>{</span><span class=mi>0</span><span class=p>},</span><span class=n>rdis</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=c1>//dis[f]=1;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;9 \</span>
<span class=c1>1 6 \</span>
<span class=c1>3 5 3 8 \</span>
<span class=c1>0 \</span>
<span class=c1>2 1 7 \</span>
<span class=c1>1 9 \</span>
<span class=c1>0 \</span>
<span class=c1>1 2 \</span>
<span class=c1>0 \</span>
<span class=c1>0&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=p>;</span>
<span class=w>        </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>j</span><span class=o>&lt;=</span><span class=n>x</span><span class=p>;</span><span class=n>j</span><span class=o>++</span><span class=p>){</span>
<span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
<span class=w>            </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>            </span><span class=n>rool</span><span class=p>[</span><span class=n>y</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>r</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>rool</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span>
<span class=w>            </span><span class=n>r</span><span class=o>=</span><span class=n>i</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>r</span><span class=o>&lt;&lt;</span><span class=n>nn</span><span class=p>;</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=n>r</span><span class=p>);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>ans</span><span class=o>+=</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse9 tabindex=0 title=expand></label><label class=collapse for=__collapse9 tabindex=0 title=collapse></label></div> </div> <h3 id=a131-p_8_5-自動分裝-apcs202002>a131: P_8_5 自動分裝 (APCS202002)<a class=headerlink href=#a131-p_8_5-自動分裝-apcs202002 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a131">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a131</a></p> <p>內容 某工程公司設計了一個自動分裝的系統。貨物會一個一個的被送進此系統，經過一些切換器的轉送後，會被輸送到 n個貨箱。系統有n–1個切換器與n個貨箱。每個切換器有一個入口以及左右兩個出口，切換器的出口會接到其他切換器或是連接到貨箱，貨箱則只有入口。下圖是一個n=7的例子，圓代表切換器，方形代表貨箱，請注意編號1 ~ n–1的裝置是切換器，貨箱編號是 n ~ 2n–1，且貨物入口一定是1號切換器的入口。</p> <p>每一個切換器會分別記錄左右兩個出口所通往貨箱的總重量，當貨物進入此切換器時，切換器會將貨物轉送到「貨箱總重量比較輕的那個出口」，如果兩邊一樣重，則送往左邊。以上圖的例子來說，假設每一個貨箱目前的重量如各矩形下方的標示，下一個到達的貨物的運送過程如下：一號切換器左邊出口是連到 {13, 10, 7} 三個貨箱，目前總重5+6+9=20；右邊出口連到的是 {12, 8, 11, 9} 四個貨箱，目前總重7+2+8+1=18，因此貨物會由右邊出口送到5號切換器。5號切換器的左邊與右邊的貨箱總重是一樣的（7+2=8+1），因此貨物由左出口送至6號切換器。最後，6號切換器將貨物送到8號貨箱（7&gt;2)。貨物進入貨箱後就存放在該貨箱，該貨物的重量就會加入該貨箱的總重，因此可能影響下一個貨物的運送路徑。</p> <p>輸入此系統的連接架構與貨箱目前的重量，以及接下來依序進入的 m個貨物的重量，請計算這 m 個貨物分別會被送到哪一個貨箱。</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/Hy8GSt84C.png> 輸入說明 <br> 第一行為兩個正整數n 和m，其中n ≤ 1e5且m ≤ 100。 <br> 第二行有n 個非負整數，依序是編號為n ~ 2n–1各個貨箱初始的重量。 <br> 第三行是m個正整數，代表接下來依序進入的貨物重量。全部貨箱初始的重量與貨物重量總和不會超過1e9。 <br> 第四行開始有n–1行，這些是系統架構的資訊：每一行有三個整數p、s與t，代表裝置p的左右出口分別接到裝置s與t，其中p一定是一個切換器的編號(1 ≤ p &lt; n)。同一行數字之間以空白間隔。 </p> <p>輸出說明 <br> 輸出一行有m個整數，依序代表接下來進入系統的m個貨物所進入到的貨箱編號，數字之間以一個空白間隔。 </p> <p>範例輸入 #1 <br> 範例一： <br> 4 5 <br> 0 0 0 0 <br> 5 3 4 2 1 <br> 1 2 3 <br> 2 4 5 <br> 3 6 7 </p> <p>範例二： <br> 7 2 <br> 9 2 1 6 8 7 5 <br> 2 3 <br> 1 2 5 <br> 2 3 7 <br> 3 13 10 <br> 4 11 9 <br> 6 12 8 <br> 5 6 4 </p> <p>範例輸出 #1 <br> 範例一： <br> 4 6 7 5 5 </p> <p>範例二：<br> 8 7 </p> <div class=collapse-code><input checked=checked id=__collapse10 name=__collapse10 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span><span class=c1>     </span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 200000</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define int long long</span>
<span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=n>m</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>in</span><span class=p>[</span><span class=mi>101</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>input</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span><span class=w> </span><span class=c1>// [0]:L  [1]:R</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>w</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+=</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfsin</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>f</span><span class=o>&gt;=</span><span class=n>n</span><span class=p>){</span><span class=w> </span><span class=c1>//leaf</span>
<span class=w>        </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>f</span><span class=o>&lt;&lt;</span><span class=s>&quot; &quot;</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>l</span><span class=o>=</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>r</span><span class=o>=</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>];</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>w</span><span class=p>[</span><span class=n>l</span><span class=p>]</span><span class=o>&lt;=</span><span class=n>w</span><span class=p>[</span><span class=n>r</span><span class=p>]){</span>
<span class=w>        </span><span class=n>w</span><span class=p>[</span><span class=n>l</span><span class=p>]</span><span class=o>+=</span><span class=n>input</span><span class=p>;</span>
<span class=w>        </span><span class=n>dfsin</span><span class=p>(</span><span class=n>l</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>else</span><span class=p>{</span>
<span class=w>        </span><span class=n>w</span><span class=p>[</span><span class=n>r</span><span class=p>]</span><span class=o>+=</span><span class=n>input</span><span class=p>;</span>
<span class=w>        </span><span class=n>dfsin</span><span class=p>(</span><span class=n>r</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>signed</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=c1>//    stringstream cin(&quot;7 2 \</span>
<span class=c1>9 2 1 6 8 7 5 \</span>
<span class=c1>2 3 \</span>
<span class=c1>1 2 5 \</span>
<span class=c1>2 3 7 \</span>
<span class=c1>3 13 10 \</span>
<span class=c1>4 11 9 \</span>
<span class=c1>6 12 8 \</span>
<span class=c1>5 6 4&quot;);</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=o>&gt;&gt;</span><span class=n>m</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=mi>2</span><span class=o>*</span><span class=n>n</span><span class=mi>-1</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=o>&gt;&gt;</span><span class=n>z</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>z</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>m</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>input</span><span class=o>=</span><span class=n>in</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>        </span><span class=n>w</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>+=</span><span class=n>input</span><span class=p>;</span>
<span class=w>        </span><span class=n>dfsin</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse10 tabindex=0 title=expand></label><label class=collapse for=__collapse10 tabindex=0 title=collapse></label></div> </div> <h3 id=a223-q_8_6-樹狀圖的距離總和>a223: Q_8_6 樹狀圖的距離總和<a class=headerlink href=#a223-q_8_6-樹狀圖的距離總和 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a223">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a223</a> 內容 </p> <p>輸入一個樹狀圖，請計算所有點到所有點的距離總和。本題假設編號 1 1 是根節點。 </p> <p>輸入說明 </p> <p>第一行是正整數 n 𝑛，代表點數，點以 1∼n 1∼𝑛編號， </p> <p>第二行有 n−1 𝑛−1 個正整數， p(2),p(3),…,p(n) 𝑝(2),𝑝(3),…,𝑝(𝑛) ，依序是編號 2∼n 2∼𝑛各點的parent， </p> <p>第三行有 n−1 𝑛−1 個正整數，依序代表 i 𝑖 從 2 2 到 n 𝑛，邊 (i,p(i)) (𝑖,𝑝(𝑖)) 的長度。n 𝑛 不超過 10 5 105，每條邊長度是不超過 1000 1000 的正整數。 </p> <p>輸出說明 </p> <p>各點到各點的距離總和。請注意 i 𝑖 到 j 𝑗 與 j 𝑗 到 i 𝑖 都要納入總和，如範例。 </p> <p>範例輸入 #1 </p> <p>4 <br> 1 2 3 <br> 10 20 30 </p> <p>範例輸出 #1 </p> <p>400 </p> <p>範例輸入 #2 </p> <p>5 <br> 1 1 1 2 <br> 20 20 30 30 </p> <p>範例輸出 #2 </p> <p>880 </p> <div class=collapse-code><input checked=checked id=__collapse11 name=__collapse11 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits//stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N  int(1e5+10)</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>subtree</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>dis</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>subtree</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>subtree</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>+=</span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>dfs1</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=w>  </span><span class=n>dis</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w>   </span><span class=o>-</span><span class=w> </span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>*</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w>    </span><span class=p>(</span><span class=n>n</span><span class=o>-</span><span class=n>subtree</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=o>*</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w>    </span><span class=p>;</span>
<span class=w>        </span><span class=c1>//cout&lt;&lt;i&lt;&lt;&quot;: &quot;&lt;&lt;dis[i]&lt;&lt;nn;</span>
<span class=w>        </span><span class=n>dfs1</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>

<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;4 \</span>
<span class=c1>1 2 3 \</span>
<span class=c1>10 20 30&quot;);</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>1 1 1 2 \</span>
<span class=c1>20 20 30 30&quot;);</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>x</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>            </span><span class=n>dis</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>+=</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs1</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>ans</span><span class=o>+=</span><span class=n>dis</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse11 tabindex=0 title=expand></label><label class=collapse for=__collapse11 tabindex=0 title=collapse></label></div> </div> <h3 id=a132-p_8_7-寶石的顏色-108全國高中賽>a132: P_8_7 寶石的顏色 (108全國高中賽)<a class=headerlink href=#a132-p_8_7-寶石的顏色-108全國高中賽 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a132">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a132</a> </p> <p>內容 </p> <p>尋寶之旅的遊戲有一個地圖，地圖上有 n 個站，以 0 到 (n – 1) 編號，此外有 (n – 1) 條道路，這些道路都是單向的，遊戲固定從 0 號站出發，且已知從 0 號站出發可以直接或間接到達任何其他 站。每一個站都有一顆寶石，寶石有分為多種顏色，第 i 站存放的寶石顏色為 c(i)。出發之前，你可以選定一種顏色的寶石收集箱，路途中遇到與你的收集箱相同顏色的寶石就可以收集(包含起點)，請你 計算最多可以收集到多少顆同色寶石。 </p> <p>輸入說明 </p> <p>第一行有是一個正整數n， n ≤ 2e5，代表地圖上有 n 個站。第二行是 n 個非負整數，依序代表每一站的寶石顏色號碼 c(0), c(1), …, c(n – 1)；寶石的顏色號碼不超過1e9。接著有 (n–1) 行，每行 兩個以空白間隔的整數 s 與 t ，表示有一條 s 到 t 的道路。 </p> <p>輸出說明 </p> <p>輸出爲一整數，代表最多可能收集到的寶石數量。 </p> <p>範例輸入 #1 </p> <p>6 <br> 0 0 0 0 0 0 <br> 0 1 <br> 1 2 <br> 0 3 <br> 1 4 <br> 1 5 </p> <p>範例輸出 #1 </p> <p>3 </p> <p>範例輸入 #2 </p> <p>10 <br> 5 3 3 1 4 0 3 4 5 0 <br> 0 1 <br> 5 2 <br> 7 3 <br> 5 4 <br> 0 5 <br> 4 6 <br> 1 7 <br> 0 8 <br> 4 9 </p> <p>範例輸出 #2 </p> <p>2 </p> <div class=collapse-code><input checked=checked id=__collapse12 name=__collapse12 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 200001</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define int long long</span>

<span class=kt>int</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=n>map</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>b</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=n>ou</span><span class=p>[</span><span class=n>N</span><span class=p>];</span><span class=w> </span><span class=c1>//出度</span>
<span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>ans</span><span class=p>;</span>
<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>ou</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span><span class=c1>//leaf</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>ma</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=k>for</span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>b</span><span class=p>){</span>
<span class=w>            </span><span class=n>ma</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>ma</span><span class=p>,</span><span class=n>i</span><span class=p>.</span><span class=n>second</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=n>ans</span><span class=p>.</span><span class=n>push_back</span><span class=p>(</span><span class=n>ma</span><span class=p>);</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>b</span><span class=p>[</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>b</span><span class=p>[</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>--</span><span class=p>;</span>

<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>signed</span><span class=w> </span><span class=n>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=c1>//    stringstream cin(&quot;10 \</span>
<span class=c1>5 3 3 1 4 0 3 4 5 0 \</span>
<span class=c1>0 8 \</span>
<span class=c1>5 2 \</span>
<span class=c1>7 3 \</span>
<span class=c1>5 4 \</span>
<span class=c1>0 5 \</span>
<span class=c1>4 6 \</span>
<span class=c1>1 7 \</span>
<span class=c1>0 1 \</span>
<span class=c1>4 9&quot;);</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>ou</span><span class=p>[</span><span class=n>x</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;*</span><span class=n>max_element</span><span class=p>(</span><span class=n>ans</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=n>ans</span><span class=p>.</span><span class=n>end</span><span class=p>());</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=cm>/*</span>




<span class=cm>*/</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse12 tabindex=0 title=expand></label><label class=collapse for=__collapse12 tabindex=0 title=collapse></label></div> </div> <h3 id=a133-p_8_8-樹的最大獨立集>a133: P_8_8 樹的最大獨立集<a class=headerlink href=#a133-p_8_8-樹的最大獨立集 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a133">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a133</a> 內容</p> <p>輸入一棵有n個點的樹，我們要挑選一群彼此不相鄰的點，而且挑選的點越多點越好。請計算最多可以挑多少點。以下圖為例，我們可以挑{0,3,4,5,6,7}共6點，沒有辦法挑出更多的不相鄰的點。 </p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image.png> </p> <p>輸入說明 </p> <p>第一行是正整數n，代表點數，點以0~n-1編號，0是根，第二行有n-1個正整數，p(1), p(2), …,p(n-1)，依序是編號1~n-1各點的parent。n不超過1e5，相鄰數字以空白間隔。 </p> <p>輸出說明 </p> <p>最多可以挑選幾點。 </p> <p>範例輸入 #1 </p> <p>9 <br> 0 0 1 1 2 2 2 6 </p> <p>範例輸出 #1 </p> <p>6 </p> <p>範例輸入 #2 </p> <p>8 <br> 0 1 2 3 3 2 2 </p> <p>範例輸出 #2 </p> <p>5 </p> <div class=collapse-code><input checked=checked id=__collapse13 name=__collapse13 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 100001</span>
<span class=cp>#define nn &quot;\n&quot;</span>
<span class=cp>#define int long long</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>out</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>


<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>out</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span><span class=c1>//leaf</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>


<span class=kt>signed</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=c1>//    stringstream cin(&quot;8 \</span>
<span class=c1>0 1 2 3 3 2 2&quot;);//    stringstream cin(&quot;8 \</span>


<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>

<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>p</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>p</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>p</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>out</span><span class=p>[</span><span class=n>p</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>


<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>

<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>            </span><span class=n>ans</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>




<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>

<span class=cm>/*</span>




<span class=cm>*/</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse13 tabindex=0 title=expand></label><label class=collapse for=__collapse13 tabindex=0 title=collapse></label></div> </div> <h3 id=a224-q_8_9-服務中心選位置>a224: Q_8_9 服務中心選位置<a class=headerlink href=#a224-q_8_9-服務中心選位置 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a224">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a224</a> </p> <p>內容 </p> <p>有 n 𝑛 個小村莊以 1∼n 1∼𝑛 編號，這些村莊以 n−1 𝑛−1 條道路連接，每條道路都是雙向通行且 連接兩個不同的村莊，已知從任兩個村莊之間都可以經由這些道路通達，兩個村莊稱為鄰近的村 莊，如果它們之間有一條道路直接相連。 </p> <p>現在要選一些村莊成立服務中心， 因為預算的關係無法每個村莊都成立一個服務中心，政府的政策決定：如果某個村莊沒有設服務中心，那麼他一定有一個鄰近的村莊有服務中心。也就是說，任何一個村 莊最多只要經過一條道路就可以到達一個有設服務中心的村莊。請你計算至少需要成立幾個服務中心。 </p> <p>輸入說明 </p> <p>第一行是正整數 n 𝑛，n&gt;1 𝑛&gt;1，村莊以 1∼n 1∼𝑛 編號。接下來有 n−1 𝑛−1 行是道路的資料，每一行有兩個正整數 u 𝑢 與 v 𝑣，代表有一條道路連接 u 𝑢 與 v 𝑣。n 𝑛 不超過 10 5 105。 </p> <p>輸出說明 </p> <p>最少需要成立的服務中心數量。 </p> <p>範例輸入 #1 </p> <p>5 <br> 1 2 <br> 5 1 <br> 5 3 <br> 5 4 </p> <p>範例輸出 #1 </p> <p>2 </p> <p>範例輸入 #2 </p> <p>7 <br> 1 2 <br> 2 3 <br> 4 3 <br> 5 4 <br> 5 6 <br> 7 6 </p> <p>範例輸出 #2 </p> <p>3 </p> <div class=collapse-code><input checked=checked id=__collapse14 name=__collapse14 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define nn cout&lt;&lt;&quot;\n&quot;;</span>
<span class=cp>#define N int(1e5)+1</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>

<span class=kt>void</span><span class=w> </span><span class=nf>clv</span><span class=p>(){</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=nb>false</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>].</span><span class=n>size</span><span class=p>()</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span>
<span class=w>        </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=c1>//cout&lt;&lt;f&lt;&lt;&quot;: &quot;&lt;&lt;i;</span>
<span class=w>            </span><span class=c1>//nn</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=c1>//1架設 2旁邊架設 0無架設</span>
<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>

<span class=w>                </span><span class=k>continue</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>

<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span>
<span class=w>                </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>                </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>2</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>2</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>-1</span><span class=p>){</span>
<span class=w>                </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>


<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>1 2 \</span>
<span class=c1>5 1 \</span>
<span class=c1>5 3 \</span>
<span class=c1>5 4&quot;);</span>

<span class=c1>//istringstream cin(&quot;7 \</span>
<span class=c1>1 2 \</span>
<span class=c1>2 3 \</span>
<span class=c1>4 3 \</span>
<span class=c1>5 4 \</span>
<span class=c1>5 6 \</span>
<span class=c1>7 6&quot;);</span>



<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>clv</span><span class=p>();</span>

<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=c1>//nn</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>            </span><span class=n>ans</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=c1>//cout&lt;&lt;c[i]&lt;&lt; &quot; &quot;;</span>
<span class=w>    </span><span class=p>}</span>


<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=c1>//cout&lt;&lt;c[i]&lt;&lt;&quot; &quot;;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>p</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>            </span><span class=n>p</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>

<span class=c1>//nn</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=o>+</span><span class=n>p</span><span class=p>;</span>

<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse14 tabindex=0 title=expand></label><label class=collapse for=__collapse14 tabindex=0 title=collapse></label></div> </div> <h3 id=a225-q_8_10-竊聽間諜網>a225: Q_8_10 竊聽間諜網<a class=headerlink href=#a225-q_8_10-竊聽間諜網 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a225">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a225</a></p> <p>內容 </p> <p>有 n 𝑛 個間諜，他們的 ID 以 0∼(n−1) 0∼(𝑛−1) 編號，間諜頭子的 ID 是 0 0，除了他以外每個間諜 都有一個領導，每個間諜只會與他的領導相互通話，現在我們要竊聽間諜們彼此的通話，所以 要在一些間諜的通話裝置上安裝竊聽器，要竊聽到某個間諜與他領導的通話， 必須至少在他們其中一人的通話裝置上安裝竊聽器。如果不想漏掉任何通話，至少要 安裝幾台竊聽器。 </p> <p>輸入說明 </p> <p>第一行是正整數 n 𝑛，代表間諜數，每個間諜的 ID 必定大於他領導的 ID。 第二行有 n−1 𝑛−1 個整數分別是 t 1 ,t 2 ,…,t n−1 𝑡1,𝑡2,…,𝑡𝑛−1，其中 t i 𝑡𝑖 就是 i 𝑖 的領導。n 𝑛 不超過 10 5 105。 </p> <p>輸出說明 </p> <p>最少的竊聽器數量。 </p> <p>範例輸入 #1 </p> <p>5 <br> 0 1 1 3 </p> <p>範例輸出 #1 </p> <p>2 </p> <p>範例輸入 #2 </p> <p>7 <br> 0 1 1 1 1 1 </p> <p>範例輸出 #2 </p> <p>1 </p> <div class=collapse-code><input checked=checked id=__collapse15 name=__collapse15 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define nn cout&lt;&lt;&quot;\n&quot;;</span>
<span class=cp>#define N int(1e5)+1</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>

<span class=kt>void</span><span class=w> </span><span class=nf>clv</span><span class=p>(){</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>=</span><span class=nb>false</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>].</span><span class=n>size</span><span class=p>()</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span>
<span class=w>        </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=c1>//cout&lt;&lt;f&lt;&lt;&quot;: &quot;&lt;&lt;i;</span>
<span class=w>            </span><span class=c1>//nn</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span><span class=c1>//1有 0無</span>
<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>

<span class=w>                </span><span class=k>continue</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>

<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>0</span><span class=p>){</span>
<span class=w>                </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>                </span><span class=n>c</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>0 1 1 3&quot;);</span>

<span class=c1>//istringstream cin(&quot;7 \</span>
<span class=c1>0 1 1 1 1 1&quot;);</span>

<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>clv</span><span class=p>();</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>


<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>==</span><span class=mi>1</span><span class=p>){</span>
<span class=w>            </span><span class=n>ans</span><span class=o>++</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>


<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>

<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse15 tabindex=0 title=expand></label><label class=collapse for=__collapse15 tabindex=0 title=collapse></label></div> </div> <h3 id=a134-p_8_11-公司派對-ncpc>a134: P_8_11 公司派對 (NCPC)<a class=headerlink href=#a134-p_8_11-公司派對-ncpc title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a134">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a134</a></p> <p>內容</p> <p>有一個公司有 n 𝑛 個成員，成員以 1∼n 1∼𝑛 編號，每個人都有一個領導，除了編號 1 1 是公司的總裁，他沒有領導。現在要辦一個公司派對，想要邀請一些人來參加，如果邀請了編號i的人來參加，就會有 r(i) 𝑟(𝑖) 的歡樂指數，可是，這個公司的任何人都不想跟他的領導一起參加派對，請你幫忙計算要邀請那些人來參加，才可以讓參加者的歡樂指數的總和最大。</p> <p>右圖是一個例子，每個圓圈代表一個人，圓圈內的數字是他的歡樂指數，每個人上方與他連線的就是他的領導，你可以看到，總裁的歡樂指數是 1 1，也全公司最低的。我們可以看到此例中有兩個人的歡樂指數是 14 14 與 11 11 ，可惜 14 14 是 11 11 的領導，所以不能同時邀請這兩人參加。這個例子的最大歡樂指數總和是 66 66 ，扣除歡樂指數分別為 1,3,3,4,14 1,3,3,4,14 那 5 5 個人，其餘的人都參加。</p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image-1.png> 輸入說明</p> <p>第一行是兩個正整數 n 𝑛 與 r(1) 𝑟(1) ，接下來有 n−1 𝑛−1行，每行兩個正整數，由 i=2∼n 𝑖=2∼𝑛，依序是 p(i) 𝑝(𝑖) 與 r(i) 𝑟(𝑖)。 n 𝑛 不超過 10 5 105， r(i) 𝑟(𝑖) 不超過 1000 1000 的正整數。</p> <p>輸出說明</p> <p>輸出參加派對的最大歡樂指數總和。</p> <p>範例輸入 #1</p> <p>4 7 1 5 2 6 3 8</p> <p>範例輸出 #1</p> <p>15</p> <p>範例輸入 #2</p> <p>15 1 1 5 1 3 1 10 2 14 2 4 3 8 4 3 5 2 5 11 6 2 6 6 8 9 8 6 8 7</p> <p>範例輸出 #2</p> <p>66</p> <div class=collapse-code><input checked=checked id=__collapse16 name=__collapse16 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>

<span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>N</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1e5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>N</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span><span class=w> </span><span class=n>p</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>void</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>f</span><span class=p>];</span><span class=w> </span><span class=c1>// 如果選擇這個節點，歡樂指數至少包括它自己</span>

<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]);</span><span class=w> </span><span class=c1>// 如果 f 不被選，則其子節點可以選或不選，取較大值</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span><span class=w> </span><span class=c1>// 如果 f 被選，則其子節點必須不被選</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>}</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>

<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>

<span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=w> </span><span class=c1>// 從根節點的不選和選中選較大的一個</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse16 tabindex=0 title=expand></label><label class=collapse for=__collapse16 tabindex=0 title=collapse></label></div> </div> <h3 id=a144-q_8_12-佔領連續的城鎮>a144: Q_8_12 佔領連續的城鎮<a class=headerlink href=#a144-q_8_12-佔領連續的城鎮 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a144">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a144</a> <br> 內容 </p> <p>某個遊戲中有 n 𝑛 個城鎮以 1∼n 1∼𝑛 編號，這些城鎮以 n−1 𝑛−1 條道路連接，每條道路都是雙向通行且連接兩個不同的城鎮，已知從任兩個城鎮之間都可以經由這些道路通達。 </p> <p>現在你要佔領一些城鎮來獲取最大的利益，佔領編號 i 𝑖 的城鎮可以獲得 w i 𝑤𝑖的利益， 但是你佔領的城鎮必須內部可以互相通達，也就是說，若 i 𝑖 與 j 𝑗 都是你的領地，則從 i 𝑖 出發可以只經過你自己的城鎮到達 j 𝑗。請計算你最多可以獲得多少總和利益。 </p> <p>輸入說明 </p> <p>第一行是正整數 n 𝑛，n&gt;1 𝑛&gt;1，村莊以 1∼n 1∼𝑛 編號。 </p> <p>第二行有 n 𝑛 個整數，依序是 w 1 ,w 2 ,…,w n 𝑤1,𝑤2,…,𝑤𝑛。 </p> <p>接下來有 n−1 𝑛−1 行是道路的資料，每一行有兩個正整數 u 𝑢 與 v 𝑣， 代表有一條道路連接 u 𝑢 與 v 𝑣。 </p> <p>n 𝑛 不超過 10 5 105，每個城鎮利益的絕對值不超過 10 4 104。 </p> <p>輸出說明 </p> <p>最多可以獲得的總和利益。 </p> <p>範例輸入 #1 </p> <p>5 <br> -2 3 -1 3 -4 <br> 1 2 <br> 5 1 <br> 5 3 <br> 5 4 </p> <p>範例輸出 #1 </p> <p>3 </p> <p>範例輸入 #2 </p> <p>7 <br> 2 -1 4 -3 5 -3 2 <br> 1 2 <br> 2 3 <br> 4 3 <br> 5 4 <br> 5 6 <br> 7 6 </p> <p>範例輸出 #2 </p> <p>7 </p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/ryey6tF4R.png></p> <div class=collapse-code><input checked=checked id=__collapse17 name=__collapse17 type=checkbox><div class=highlight><span class=filename>程式碼 (GPT4，如圖)</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>

<span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>MAX_N</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100005</span><span class=p>;</span><span class=w> </span><span class=c1>// 定義最大節點數</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>adj</span><span class=p>[</span><span class=n>MAX_N</span><span class=p>];</span><span class=w>   </span><span class=c1>// 用來存儲樹的鄰接表</span>
<span class=kt>int</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>MAX_N</span><span class=p>];</span><span class=w>             </span><span class=c1>// 每個城鎮的利益值</span>
<span class=kt>int</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>MAX_N</span><span class=p>];</span><span class=w>            </span><span class=c1>// DP數組，用於存儲包含節點i的最大利益</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visited</span><span class=p>[</span><span class=n>MAX_N</span><span class=p>];</span><span class=w>      </span><span class=c1>// 用於DFS中標記已訪問的節點</span>
<span class=kt>int</span><span class=w> </span><span class=n>ans</span><span class=o>=-</span><span class=n>INT_MIN</span><span class=p>;</span>


<span class=c1>// 深度優先搜索(DFS)函數</span>
<span class=kt>void</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>visited</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>f</span><span class=p>];</span><span class=w>  </span><span class=c1>// 首先只考慮節點u自己的利益</span>

<span class=w>    </span><span class=c1>// 遍歷所有子節點（相鄰的頂點）</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>adj</span><span class=p>[</span><span class=n>f</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>visited</span><span class=p>[</span><span class=n>i</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>            </span><span class=c1>// 如果dp[i]是正的，則將它加到當前節點的利益中</span>
<span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>ans</span><span class=o>=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=n>ans</span><span class=p>);</span>
<span class=p>}</span>

<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>-2 3 -1 3 -4 \</span>
<span class=c1>1 2 \</span>
<span class=c1>5 1 \</span>
<span class=c1>5 3 \</span>
<span class=c1>5 4&quot;);</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=c1>// 輸入城鎮數</span>

<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=w> </span><span class=c1>// 輸入每個城鎮的利益值</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>u</span><span class=p>,</span><span class=w> </span><span class=n>v</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>v</span><span class=p>;</span><span class=w> </span><span class=c1>// 讀入每條道路連接的兩個城鎮</span>
<span class=w>        </span><span class=n>adj</span><span class=p>[</span><span class=n>u</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>v</span><span class=p>);</span>
<span class=w>        </span><span class=n>adj</span><span class=p>[</span><span class=n>v</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>u</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>

<span class=w>    </span><span class=n>memset</span><span class=p>(</span><span class=n>visited</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>visited</span><span class=p>));</span><span class=w> </span><span class=c1>// 初始化訪問標記</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=w> </span><span class=c1>// 從節點1開始進行DFS</span>

<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>


<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse17 tabindex=0 title=expand></label><label class=collapse for=__collapse17 tabindex=0 title=collapse></label></div> </div> <div class=collapse-code><input checked=checked id=__collapse18 name=__collapse18 type=checkbox><div class=highlight><span class=filename>程式碼 加入條件</span><pre><span></span><code><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N int(1e5+10)</span>
<span class=cp>#define nn &quot;\n&quot;</span>

<span class=n>vector</span><span class=o>&lt;</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=o>&gt;</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>N</span><span class=p>][</span><span class=mi>2</span><span class=p>];</span>
<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>ans</span><span class=o>=-</span><span class=n>LONG_LONG_MIN</span><span class=p>;</span>


<span class=c1>//dp[i][1]=dp[i-1]+w[i];</span>
<span class=c1>//dp[i][0]=0;</span>


<span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>

<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>=</span><span class=n>w</span><span class=p>[</span><span class=n>f</span><span class=p>];</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>

<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>]){</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span><span class=o>+=</span><span class=n>max</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]);</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>            </span><span class=c1>//cout&lt;&lt;f&lt;&lt;&quot;: &quot;&lt;&lt;i&lt;&lt; &quot; &quot;&lt;&lt; dp[i][1]&lt;&lt;&quot; &quot;&lt;&lt; dp[i][0]&lt;&lt;nn;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>ans</span><span class=o>=</span><span class=n>max</span><span class=p>({</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span><span class=n>dp</span><span class=p>[</span><span class=n>f</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span><span class=n>ans</span><span class=p>});</span>
<span class=p>}</span>


<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>(){</span>
<span class=w>    </span><span class=n>ios</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
<span class=w>    </span><span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>



<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>-2 3 -1 3 -4 \</span>
<span class=c1>1 2 \</span>
<span class=c1>5 1 \</span>
<span class=c1>5 3 \</span>
<span class=c1>5 4&quot;);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;7 \</span>
<span class=c1>2 -1 4 -3 5 -3 2 \</span>
<span class=c1>1 2 \</span>
<span class=c1>2 3 \</span>
<span class=c1>4 3 \</span>
<span class=c1>5 4 \</span>
<span class=c1>5 6 \</span>
<span class=c1>7 6&quot;);</span>



<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=kt>long</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>



<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>


<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>ans</span><span class=p>;</span>







<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse18 tabindex=0 title=expand></label><label class=collapse for=__collapse18 tabindex=0 title=collapse></label></div> </div> <h3 id=a135-p_8_13-不同成本的購物中心->a135: P_8_13 不同成本的購物中心 (@@)<a class=headerlink href=#a135-p_8_13-不同成本的購物中心- title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a135">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a135</a></p> <p>內容 </p> <p>有 n 𝑛 個小村鎮以 1∼n 1∼𝑛 編號，這些村鎮以 n−1 𝑛−1 條道路連接，每條道路都是雙向通行且連接兩個不同的村鎮，已知從任兩個村莊之間都可以經由這些道路通達，兩個村莊稱為鄰近的村 莊，如果它們之間有一條道路直接相連。 </p> <p>現在要選一些村莊成立服務中心，因為預算的關係無法每個村莊都成立一個服務中心，政府的政策決定：如果某個村莊沒有設服務中心，那麼他一定有一個鄰近的村莊有服務中心。也就是說，任何一個村莊 最多只要經過一條道路就可以到達一個有設服務中心的村莊。每個村莊設立服務中心的成本不同，在編號 i 𝑖 的村莊成立服務中心需要的成本是 w i 𝑤𝑖，我們希望以最少的總成本設置服務中心，請 你計算最少的總成本。 </p> <p>輸入說明 </p> <p>第一行是正整數 n 𝑛，n&gt;1 𝑛&gt;1，村莊以 1∼n 1∼𝑛 編號。 <br> 第二行有 n 𝑛 個正整數，依序是 w 1 ,w 2 ,…,w n 𝑤1,𝑤2,…,𝑤𝑛。 <br> 接下來有 n−1 𝑛−1 行是道路的資料，每一行有兩個正整數 u 𝑢 與 v 𝑣，代表有一條道路連接 u 𝑢 與 v 𝑣。 </p> <p>n 𝑛 不超過 10 5 105，每個村莊設置成本不超過 1000 1000。 </p> <p>輸出說明 </p> <p>最少需要成立的服務中心數量。 </p> <p>範例輸入 #1 </p> <p>5 <br> 2 4 1 3 7 <br> 1 2 <br> 5 1 <br> 5 3 <br> 5 4 </p> <p>範例輸出 #1 </p> <p>6 </p> <p>範例輸入 #2 </p> <p>7 <br> 1 3 3 1 2 2 1 <br> 1 2 <br> 2 3 <br> 4 3 <br> 5 4 <br> 5 6 <br> 7 6 </p> <p>範例輸出 #2 </p> <p>3 </p> <p><img alt="alt text" src=images/%E6%A8%B9%E8%AB%96/image-54.png></p> <div class=collapse-code><input checked=checked id=__collapse19 name=__collapse19 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=c1>// P-8-13 min domination set of a tree</span>
<span class=c1>// top-down DP d1(r): min cost with root,</span>
<span class=c1>// d01(r): without root but root is dominated</span>
<span class=c1>// d00(r): without root and root is not necessarily dominated</span>
<span class=c1>// d1(r)=w(r)+sum(min(d00(v),d1(v)): all child v of r), d00&lt;=d01</span>
<span class=c1>// d00(r)=sum(min(d1(v),d01(v)))</span>
<span class=c1>// d01(r)=sum(min(d1(v),d01(v)))+ max(0,min(d1[v}-d01(v)))</span>
<span class=c1>// not all d01</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;bits/stdc++.h&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=cp>#define N 100020</span>
<span class=cp>#define oo 1000000000</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
<span class=kt>int</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=w> </span><span class=n>d1</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=w> </span><span class=n>d01</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=w> </span><span class=n>d00</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=kt>bool</span><span class=w> </span><span class=n>visit</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>

<span class=c1>// set min domination set of subtree(r) with parent p</span>
<span class=kt>void</span><span class=w> </span><span class=nf>dfs</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>f</span><span class=p>){</span>
<span class=w>    </span><span class=n>visit</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=nb>true</span><span class=p>;</span>
<span class=w>    </span><span class=n>d1</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>w</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=w> </span><span class=n>d01</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=n>oo</span><span class=p>,</span><span class=w> </span><span class=n>d00</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>f</span><span class=p>])</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dfs</span><span class=p>(</span><span class=n>i</span><span class=p>);</span>
<span class=w>            </span><span class=n>d1</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>d00</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=w> </span><span class=n>d1</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span><span class=w>  </span><span class=c1>//自己有</span>
<span class=w>            </span><span class=n>d00</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>d1</span><span class=p>[</span><span class=n>i</span><span class=p>],</span><span class=w> </span><span class=n>d01</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span><span class=w> </span><span class=c1>//其一子有</span>
<span class=w>            </span><span class=n>d01</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>d01</span><span class=p>[</span><span class=n>f</span><span class=p>],</span><span class=w> </span><span class=n>d1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>-</span><span class=n>d01</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span><span class=w> </span><span class=c1>//沒有子有</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>d01</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>d00</span><span class=p>[</span><span class=n>f</span><span class=p>]</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>d01</span><span class=p>[</span><span class=n>f</span><span class=p>]);</span>
<span class=w>    </span><span class=k>return</span><span class=p>;</span>
<span class=p>}</span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>

<span class=w>    </span><span class=c1>//istringstream cin(&quot;5 \</span>
<span class=c1>2 4 1 3 7 \</span>
<span class=c1>1 2 \</span>
<span class=c1>5 1 \</span>
<span class=c1>5 3 \</span>
<span class=c1>5 4&quot;);</span>
<span class=w>    </span><span class=c1>//istringstream cin(&quot;7 \</span>
<span class=c1>1 3 3 1 2 2 1 \</span>
<span class=c1>1 2 \</span>
<span class=c1>2 3 \</span>
<span class=c1>4 3 \</span>
<span class=c1>5 4 \</span>
<span class=c1>5 6 \</span>
<span class=c1>7 6&quot;);</span>

<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>n</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>w</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>&lt;</span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=o>&gt;&gt;</span><span class=n>x</span><span class=o>&gt;&gt;</span><span class=n>y</span><span class=p>;</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
<span class=w>        </span><span class=n>v</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=c1>// parent of root(1) is set to 0(dummy);</span>
<span class=w>    </span><span class=n>dfs</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
<span class=w>    </span><span class=n>cout</span><span class=o>&lt;&lt;</span><span class=n>min</span><span class=p>(</span><span class=n>d1</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span><span class=w> </span><span class=n>d01</span><span class=p>[</span><span class=mi>1</span><span class=p>]);</span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse19 tabindex=0 title=expand></label><label class=collapse for=__collapse19 tabindex=0 title=collapse></label></div> </div> <h3 id=a142-q_8_16病毒演化-apcs202007>a142: Q_8_16.病毒演化 (APCS202007)<a class=headerlink href=#a142-q_8_16病毒演化-apcs202007 title="Permanent link"></a></h3> <p><a href="https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a142">https://judge.hwsh.tc.edu.tw/ShowProblem?problemid=a142</a> 內容</p> <p>在資訊科學上，RNA 病毒可以看成一個由 A、U、G、C 這四種字母構成的字串。病毒 演化中，某些字元可能變異成其他字元，例如將 AAUGG 中的第 3 個位置的 U 換成 C， 則得到 AACGG，變異可能發生在多個位置。有個實驗團隊取得了某種 RNA 病毒的數 個 RNA 片段樣本，並且掌握到這些樣本演化的親緣關係，用<br> （樣本編號，親代編號，RNA 字串）<br> 的格式記錄，其中「樣本編號」與「親代編號」為兩個整數，若兩數字相同，則該樣 本即為演化的源頭。例如，<br> （1, 1, AAAA）（2, 1, GCAA）<br> 表示樣本 1 的 RNA 字串為 AAAA，樣本 2 的為 GCAA，且樣本 2 是由樣本 1 在兩個位置發生變異演化而來，樣本 1 為演化的源頭。</p> <p>然而，字串中每個位置的字元無法確定，實驗團隊以@來表示這些字元，換言之，@可能為 A、U、G、C 中任何一個。請注意，一個字串中可能有多個@，並非代表這些位 置的字元是相同的。例如 A@C@可能是任何第一個字元為 A 且第三個字元為 C 的字串，像是 ACCU 或 AACC。團隊猜測演化過程發生的變異總數會盡可能的少。請你利 用親緣關係，來計算最小的變異總數量。</p> <p>輸入說明</p> <p>第一行有兩個正整數 n 與 m，表示共有 n 個樣本，由 1 至 n 編號；每 個樣本之 RNA 字串長度均為 m，其中 n ≤ 1000 且 m ≤ 80。</p> <p>接下來 n 行，每行包含以空白間隔的兩個正整數 i 與 j 以及一個 RNA 字串 si，對應一個樣本（i, j, si），si由 A、U、G、C 與@五種字元所組成。若 i=j=1，則該樣本即為演化的源頭， 源頭以外的樣本皆恰有一個親代。</p> <p>輸出說明</p> <p>輸出最小可能的變異總數。</p> <p>範例輸入 #1 </p> <p>2 3 <br> 1 1 AAC <br> 2 1 A@@ </p> <p>範例輸出 #1 </p> <p>0 </p> <p>範例輸入 #2 </p> <p>6 1 <br> 1 1 @ <br> 2 1 @ <br> 3 1 C <br> 4 1 C <br> 5 2 A <br> 6 2 A </p> <p>範例輸出 #2 </p> <p>1 </p> <div class=collapse-code><input checked=checked id=__collapse20 name=__collapse20 type=checkbox><div class=highlight><span class=filename>code</span><pre><span></span><code><span class=err>```</span><span class=n>cpp</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;vector&gt;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;map&gt;</span>
<span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
<span class=w> </span>
<span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=w> </span><span class=n>root</span><span class=p>,</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=mi>1005</span><span class=p>][</span><span class=mi>85</span><span class=p>][</span><span class=mi>5</span><span class=p>],</span><span class=w> </span><span class=n>ans</span><span class=p>,</span><span class=w> </span><span class=n>inf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>1e9</span><span class=p>;</span>
<span class=n>string</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=mi>1005</span><span class=p>];</span>
<span class=n>vector</span><span class=w> </span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=mi>1005</span><span class=p>];</span>
<span class=n>map</span><span class=w> </span><span class=o>&lt;</span><span class=kt>char</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>&gt;</span><span class=w> </span><span class=n>mp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{{</span><span class=sc>&#39;@&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>},</span><span class=w> </span><span class=p>{</span><span class=sc>&#39;A&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>},</span><span class=w> </span><span class=p>{</span><span class=sc>&#39;U&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>},</span><span class=w> </span><span class=p>{</span><span class=sc>&#39;C&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>},</span><span class=w> </span><span class=p>{</span><span class=sc>&#39;G&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>}};</span>
<span class=w> </span>
<span class=kt>void</span><span class=w> </span><span class=nf>f</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>now</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>pos</span><span class=p>){</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>now</span><span class=p>].</span><span class=n>empty</span><span class=p>()){</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>s</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>]</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=sc>&#39;@&#39;</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=p>;</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>inf</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>mp</span><span class=p>[</span><span class=n>s</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>]]]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>now</span><span class=p>]){</span>
<span class=w>        </span><span class=n>f</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>pos</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mp</span><span class=p>[</span><span class=n>s</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>]];</span>
<span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=mi>0</span><span class=p>){</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>inf</span><span class=p>;</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>now</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>]);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>];</span>
<span class=w>        </span><span class=k>return</span><span class=p>;</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>4</span><span class=p>;</span><span class=w> </span><span class=n>c</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>auto</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=n>v</span><span class=p>[</span><span class=n>now</span><span class=p>]){</span>
<span class=w>            </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>]</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=n>c</span><span class=p>]);</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>min</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>2</span><span class=p>]),</span><span class=w> </span><span class=n>min</span><span class=p>(</span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>now</span><span class=p>][</span><span class=n>pos</span><span class=p>][</span><span class=mi>4</span><span class=p>]));</span>
<span class=p>}</span>
<span class=w> </span>
<span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>m</span><span class=p>;</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>n</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
<span class=w>        </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=n>a</span><span class=p>];</span>
<span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=n>root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>;</span>
<span class=w>        </span><span class=k>else</span><span class=w> </span><span class=n>v</span><span class=p>[</span><span class=n>b</span><span class=p>].</span><span class=n>push_back</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>m</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>){</span>
<span class=w>        </span><span class=n>f</span><span class=p>(</span><span class=n>root</span><span class=p>,</span><span class=w> </span><span class=n>i</span><span class=p>);</span>
<span class=w>        </span><span class=n>ans</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>dp</span><span class=p>[</span><span class=n>root</span><span class=p>][</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>
<span class=w>    </span><span class=p>}</span>
<span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>ans</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class=code-footer><label class=expand for=__collapse20 tabindex=0 title=expand></label><label class=collapse for=__collapse20 tabindex=0 title=collapse></label></div> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=%E5%9C%96%E8%AB%96.html class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> 圖論 </div> </div> </a> <a href=CSEC.html class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> CSEC </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> with emoji by <a href=https://github.com/twitter/twemoji target=_blank rel=noopener> Twemoji </a> </div> <div class=md-social> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": ".", "features": ["sitemap", "navigation.tabs", "navigation.top", "navigation.instant", "navigation.indexes", "toc.follow", "toc.integrate", "content.tabs.link", "search.share", "search.suggest", "content.code.copy", "content.code.annotations"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=assets/javascripts/bundle.471ce7a9.min.js></script> <script src=https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=assets/pymdownx-extras/extra-loader-iLQ-keay.js></script> </body> </html>